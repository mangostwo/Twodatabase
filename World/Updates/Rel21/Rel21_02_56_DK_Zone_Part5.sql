-- ----------------------------------------
-- Added to prevent timeout's while loading
-- ----------------------------------------
SET GLOBAL net_read_timeout=30;
SET GLOBAL net_write_timeout=60;
SET GLOBAL net_buffer_length=1000000; 
SET GLOBAL max_allowed_packet=1000000000;
SET GLOBAL connect_timeout=10000000;

-- --------------------------------------------------------------------------------
-- This is an attempt to create a full transactional MaNGOS update (v1.3)
-- --------------------------------------------------------------------------------
DROP PROCEDURE IF EXISTS `update_mangos`; 

DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `update_mangos`()
BEGIN
    DECLARE bRollback BOOL  DEFAULT FALSE ;
    DECLARE CONTINUE HANDLER FOR SQLEXCEPTION SET `bRollback` = TRUE;

    -- Current Values (TODO - must be a better way to do this)
    SET @cCurVersion := (SELECT `version` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
    SET @cCurStructure := (SELECT structure FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
    SET @cCurContent := (SELECT content FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);

    -- Expected Values
    SET @cOldVersion = '21'; 
    SET @cOldStructure = '02'; 
    SET @cOldContent = '55';

    -- New Values
    SET @cNewVersion = '21';
    SET @cNewStructure = '02';
    SET @cNewContent = '56';
                            -- DESCRIPTION IS 30 Characters MAX    
    SET @cNewDescription = 'DK_Zone_Part5';

                        -- COMMENT is 150 Characters MAX
    SET @cNewComment = 'DK_Zone_Part5';

    -- Evaluate all settings
    SET @cCurResult := (SELECT description FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
    SET @cOldResult := (SELECT description FROM db_version WHERE `version`=@cOldVersion AND `structure`=@cOldStructure AND `content`=@cOldContent);
    SET @cNewResult := (SELECT description FROM db_version WHERE `version`=@cNewVersion AND `structure`=@cNewStructure AND `content`=@cNewContent);

    IF (@cCurResult = @cOldResult) THEN    -- Does the current version match the expected version
        -- APPLY UPDATE
        START TRANSACTION;

        -- UPDATE THE DB VERSION
        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
        INSERT INTO `db_version` VALUES (@cNewVersion, @cNewStructure, @cNewContent, @cNewDescription, @cNewComment);
        SET @cNewResult := (SELECT description FROM db_version WHERE `version`=@cNewVersion AND `structure`=@cNewStructure AND `content`=@cNewContent);

        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
        -- -- PLACE UPDATE SQL BELOW -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
-- UDB [085] DK Zone Part5. Update
-- ---------------------------
-- DK Starting Zone - phase 2
-- ---------------------------

-- All targets for eye of acherus -- aura update 
UPDATE creature_template_addon SET auras = 51939 WHERE entry IN (28542,28543,28544,28525);
-- Spawns that req. phaseMask
UPDATE creature SET phaseMask = 2 WHERE guid IN (129477,129479,128801,129489,128799,129483,128800,129484,128797,128802,129490,129478,129491,129486,129488,129475,129474,129476,129487,129485,128798);  -- Citizen of Havenshire and Citizen of New Avalon
UPDATE creature SET phaseMask = 2 WHERE guid = 128752; -- High General Abbendis
UPDATE creature SET phaseMask = 2 WHERE guid = 128796; -- High Abbot Landgren
-- spawns with wrong phase
DELETE FROM creature WHERE guid IN (128696,128695,128694,128693,128735,128691,128690,128689,128692,128688,128687,128737,128656,128661,128655,128660,128654,128659,128653,128658,128652,128657);
DELETE FROM creature_addon WHERE guid IN (128696,128695,128694,128693,128735,128691,128690,128689,128692,128688,128687,128737,128656,128661,128655,128660,128654,128659,128653,128658,128652,128657);
DELETE FROM creature_movement WHERE id IN (128696,128695,128694,128693,128735,128691,128690,128689,128692,128688,128687,128737,128656,128661,128655,128660,128654,128659,128653,128658,128652,128657);
DELETE FROM game_event_creature WHERE guid IN (128696,128695,128694,128693,128735,128691,128690,128689,128692,128688,128687,128737,128656,128661,128655,128660,128654,128659,128653,128658,128652,128657);
DELETE FROM game_event_creature_data WHERE guid IN (128696,128695,128694,128693,128735,128691,128690,128689,128692,128688,128687,128737,128656,128661,128655,128660,128654,128659,128653,128658,128652,128657);
DELETE FROM creature_battleground WHERE guid IN (128696,128695,128694,128693,128735,128691,128690,128689,128692,128688,128687,128737,128656,128661,128655,128660,128654,128659,128653,128658,128652,128657);
DELETE FROM creature_linking WHERE guid IN (128696,128695,128694,128693,128735,128691,128690,128689,128692,128688,128687,128737,128656,128661,128655,128660,128654,128659,128653,128658,128652,128657) 
OR master_guid IN (128696,128695,128694,128693,128735,128691,128690,128689,128692,128688,128687,128737,128656,128661,128655,128660,128654,128659,128653,128658,128652,128657);
-- reuse empty guids -- UDB ONLY
DELETE FROM creature WHERE guid IN (32073,32074,79456,79457,79458,79477,79478,79479,79480,79481,79484,79486,79506,79533,79535,79542,79549,79553,79561,79570,81088,81089,82999,83011,83012,83013,83014,83015,83037,
83044,83045,83047,83059,83060,83066,83067,83068,83089,83124,83126,83132,83133,83136,83138,83140,83142,83144,83145,83147,83158,83159,85532,85533,85534,85535,85536,85537,85538,85539,85540,85541,85542,85543,85544,
85574,85575,85576,85577,85578,86031,86053,86054,86055,86056,86057,86058,86059,86060,86063,86064,86085,87006,101332,101333,101334,101335,101336,101337,101338,101339,101340,101341,101342,101343,117312,117313,117314,
117315,117316,117317,117318,117319,117320,117321,117322,117323,120795,120906,125330,125692,129164,129435,129446,129452,129458,133918,133919,133920,134658,134670,136255,136472,136473,136558);
DELETE FROM creature_addon WHERE guid IN (32073,32074,79456,79457,79458,79477,79478,79479,79480,79481,79484,79486,79506,79533,79535,79542,79549,79553,79561,79570,81088,81089,82999,83011,83012,83013,83014,83015,83037,
83044,83045,83047,83059,83060,83066,83067,83068,83089,83124,83126,83132,83133,83136,83138,83140,83142,83144,83145,83147,83158,83159,85532,85533,85534,85535,85536,85537,85538,85539,85540,85541,85542,85543,85544,
85574,85575,85576,85577,85578,86031,86053,86054,86055,86056,86057,86058,86059,86060,86063,86064,86085,87006,101332,101333,101334,101335,101336,101337,101338,101339,101340,101341,101342,101343,117312,117313,117314,
117315,117316,117317,117318,117319,117320,117321,117322,117323,120795,120906,125330,125692,129164,129435,129446,129452,129458,133918,133919,133920,134658,134670,136255,136472,136473,136558);
DELETE FROM creature_movement WHERE id IN (32073,32074,79456,79457,79458,79477,79478,79479,79480,79481,79484,79486,79506,79533,79535,79542,79549,79553,79561,79570,81088,81089,82999,83011,83012,83013,83014,83015,83037,
83044,83045,83047,83059,83060,83066,83067,83068,83089,83124,83126,83132,83133,83136,83138,83140,83142,83144,83145,83147,83158,83159,85532,85533,85534,85535,85536,85537,85538,85539,85540,85541,85542,85543,85544,
85574,85575,85576,85577,85578,86031,86053,86054,86055,86056,86057,86058,86059,86060,86063,86064,86085,87006,101332,101333,101334,101335,101336,101337,101338,101339,101340,101341,101342,101343,117312,117313,117314,
117315,117316,117317,117318,117319,117320,117321,117322,117323,120795,120906,125330,125692,129164,129435,129446,129452,129458,133918,133919,133920,134658,134670,136255,136472,136473,136558);
DELETE FROM game_event_creature WHERE guid IN (32073,32074,79456,79457,79458,79477,79478,79479,79480,79481,79484,79486,79506,79533,79535,79542,79549,79553,79561,79570,81088,81089,82999,83011,83012,83013,83014,83015,83037,
83044,83045,83047,83059,83060,83066,83067,83068,83089,83124,83126,83132,83133,83136,83138,83140,83142,83144,83145,83147,83158,83159,85532,85533,85534,85535,85536,85537,85538,85539,85540,85541,85542,85543,85544,
85574,85575,85576,85577,85578,86031,86053,86054,86055,86056,86057,86058,86059,86060,86063,86064,86085,87006,101332,101333,101334,101335,101336,101337,101338,101339,101340,101341,101342,101343,117312,117313,117314,
117315,117316,117317,117318,117319,117320,117321,117322,117323,120795,120906,125330,125692,129164,129435,129446,129452,129458,133918,133919,133920,134658,134670,136255,136472,136473,136558);
DELETE FROM game_event_creature_data WHERE guid IN (32073,32074,79456,79457,79458,79477,79478,79479,79480,79481,79484,79486,79506,79533,79535,79542,79549,79553,79561,79570,81088,81089,82999,83011,83012,83013,83014,83015,83037,
83044,83045,83047,83059,83060,83066,83067,83068,83089,83124,83126,83132,83133,83136,83138,83140,83142,83144,83145,83147,83158,83159,85532,85533,85534,85535,85536,85537,85538,85539,85540,85541,85542,85543,85544,
85574,85575,85576,85577,85578,86031,86053,86054,86055,86056,86057,86058,86059,86060,86063,86064,86085,87006,101332,101333,101334,101335,101336,101337,101338,101339,101340,101341,101342,101343,117312,117313,117314,
117315,117316,117317,117318,117319,117320,117321,117322,117323,120795,120906,125330,125692,129164,129435,129446,129452,129458,133918,133919,133920,134658,134670,136255,136472,136473,136558);
DELETE FROM creature_battleground WHERE guid IN (32073,32074,79456,79457,79458,79477,79478,79479,79480,79481,79484,79486,79506,79533,79535,79542,79549,79553,79561,79570,81088,81089,82999,83011,83012,83013,83014,83015,83037,
83044,83045,83047,83059,83060,83066,83067,83068,83089,83124,83126,83132,83133,83136,83138,83140,83142,83144,83145,83147,83158,83159,85532,85533,85534,85535,85536,85537,85538,85539,85540,85541,85542,85543,85544,
85574,85575,85576,85577,85578,86031,86053,86054,86055,86056,86057,86058,86059,86060,86063,86064,86085,87006,101332,101333,101334,101335,101336,101337,101338,101339,101340,101341,101342,101343,117312,117313,117314,
117315,117316,117317,117318,117319,117320,117321,117322,117323,120795,120906,125330,125692,129164,129435,129446,129452,129458,133918,133919,133920,134658,134670,136255,136472,136473,136558);
DELETE FROM creature_linking WHERE guid IN (32073,32074,79456,79457,79458,79477,79478,79479,79480,79481,79484,79486,79506,79533,79535,79542,79549,79553,79561,79570,81088,81089,82999,83011,83012,83013,83014,83015,83037,
83044,83045,83047,83059,83060,83066,83067,83068,83089,83124,83126,83132,83133,83136,83138,83140,83142,83144,83145,83147,83158,83159,85532,85533,85534,85535,85536,85537,85538,85539,85540,85541,85542,85543,85544,
85574,85575,85576,85577,85578,86031,86053,86054,86055,86056,86057,86058,86059,86060,86063,86064,86085,87006,101332,101333,101334,101335,101336,101337,101338,101339,101340,101341,101342,101343,117312,117313,117314,
117315,117316,117317,117318,117319,117320,117321,117322,117323,120795,120906,125330,125692,129164,129435,129446,129452,129458,133918,133919,133920,134658,134670,136255,136472,136473,136558)
OR master_guid IN (32073,32074,79456,79457,79458,79477,79478,79479,79480,79481,79484,79486,79506,79533,79535,79542,79549,79553,79561,79570,81088,81089,82999,83011,83012,83013,83014,83015,83037,
83044,83045,83047,83059,83060,83066,83067,83068,83089,83124,83126,83132,83133,83136,83138,83140,83142,83144,83145,83147,83158,83159,85532,85533,85534,85535,85536,85537,85538,85539,85540,85541,85542,85543,85544,
85574,85575,85576,85577,85578,86031,86053,86054,86055,86056,86057,86058,86059,86060,86063,86064,86085,87006,101332,101333,101334,101335,101336,101337,101338,101339,101340,101341,101342,101343,117312,117313,117314,
117315,117316,117317,117318,117319,117320,117321,117322,117323,120795,120906,125330,125692,129164,129435,129446,129452,129458,133918,133919,133920,134658,134670,136255,136472,136473,136558);
INSERT INTO creature (guid, id, modelid, map, spawnMask, phaseMask, position_x, position_y, position_z, orientation, spawntimesecs, spawndist, curhealth, curmana, MovementType) VALUES
 -- Scourge Gryphon
(128696, 29501, 0, 609, 1, 2, 2409.095, -5722.372, 154.005, 4.677482, 120, 0, 4906, 0, 0),
(128695, 29501, 0, 609, 1, 2, 2402.865, -5727.03, 154.007, 5.445427, 120, 0, 4906, 0, 0),
-- Scarlet Crusader
(128694, 28529, 0, 609, 1, 2, 1849.022, -5957.297, 149.6885, 0.301217, 120, 0, 2453, 0, 0), 
(128693, 28529, 0, 609, 1, 2, 1821.247, -5895.27, 149.6701, 5.399051, 120, 0, 2453, 0, 0), 
(128735, 28529, 0, 609, 1, 2, 1821.229, -5867.864, 114.4244, 0.6283185, 120, 0, 2453, 0, 0),
(128691, 28529, 0, 609, 1, 2, 1817.483, -5972.377, 116.2088, 2.111848, 120, 0, 2453, 0, 0),
(128690, 28529, 0, 609, 1, 2, 1817.96, -5915.878, 112.7786, 0.1919862, 120, 0, 2453, 0, 0),
(128689, 28529, 0, 609, 1, 2, 1825.083, -5907.236, 115.9916, 0, 120, 0, 2453, 0, 0),
(128692, 28529, 0, 609, 1, 2, 1855.638, -5928.353, 105.1497, 0.3665192, 120, 0, 2453, 0, 0),
(128688, 28529, 0, 609, 1, 2, 1846.022, -5941.425, 117.6101, 0.6457718, 120, 0, 2453, 0, 0),
(128687, 28529, 0, 609, 1, 2, 1832.604, -5937.245, 112.8523, 0.3839724, 120, 0, 2453, 0, 0),
(128737, 28529, 0, 609, 1, 2, 1837.32, -5890.742, 116.5956, 5.742133, 120, 0, 2453, 0, 0),
(128656, 28529, 0, 609, 1, 2, 1843.469, -5900.237, 105.1286, 5.951573, 120, 0, 2453, 0, 0),
(128661, 28529, 0, 609, 1, 2, 1864.83, -5949.614, 117.1199, 1.291544, 120, 0, 2453, 0, 0),
(128655, 28529, 0, 609, 1, 2, 1831.995, -5899.981, 115.6006, 6.056293, 120, 0, 2453, 0, 0),
(128660, 28529, 0, 609, 1, 2, 1836.074, -5910.663, 107.6003, 0.122173, 120, 0, 2453, 0, 0),
(128654, 28529, 0, 609, 1, 2, 1854.217, -5946.555, 116.2794, 1.134464, 120, 0, 2453, 0, 0),
(128659, 28529, 0, 609, 1, 2, 1800.298, -5942.397, 116.2113, 0.6806784, 120, 0, 2453, 0, 0),
(128653, 28529, 0, 609, 1, 2, 1802.826, -5970.984, 116.1361, 0.08726646, 120, 0, 2453, 0, 0),
(128658, 28529, 0, 609, 1, 2, 1812.121, -5938.086, 115.3824, 2.617994, 120, 0, 2453, 0, 0),
(128652, 28529, 0, 609, 1, 2, 1769.587, -5927.734, 116.2277, 0.7853982, 120, 0, 2453, 0, 0),
(128657, 28529, 0, 609, 1, 2, 1804.024, -5927.949, 115.7439, 4.485496, 120, 0, 2453, 0, 0),
(32073, 28529, 0, 609, 1, 2, 1801.723, -5985.942, 115.8919, 1.413717, 120, 0, 2453, 0, 0), 
(32074, 28529, 0, 609, 1, 2, 1733.341, -5893.212, 116.326, 3.874631, 120, 0, 2453, 0, 0),
(79456, 28529, 0, 609, 1, 2, 1873.823, -5937.143, 103.766, 1.623156, 120, 0, 2453, 0, 0),
(79457, 28529, 0, 609, 1, 2, 1803.846, -5788.624, 149.6869, 6.263151, 120, 0, 2453, 0, 0), 
(79458, 28529, 0, 609, 1, 2, 1804.153, -5849.433, 149.67, 3.733546, 120, 0, 2453, 0, 0),
(79477, 28529, 0, 609, 1, 2, 1801.421, -5740.647, 141.0913, 4.769802, 120, 0, 2453, 0, 0),
(79478, 28529, 0, 609, 1, 2, 1769.032, -5797.97, 116.2356, 4.799655, 120, 0, 2453, 0, 0),
(79479, 28529, 0, 609, 1, 2, 1764.665, -5798.557, 116.2854, 4.834562, 120, 0, 2453, 0, 0),
(79480, 28529, 0, 609, 1, 2, 1778.208, -5797.711, 115.9628, 4.782202, 120, 0, 2453, 0, 0),
(79481, 28529, 0, 609, 1, 2, 1774.032, -5797.677, 116.0895, 4.873692, 120, 0, 2453, 0, 0),
(79484, 28529, 0, 609, 1, 2, 1782.601, -5797.508, 115.8885, 4.782202, 120, 0, 2453, 0, 0),
(79486, 28529, 0, 609, 1, 2, 1765.205, -5803.292, 116.3939, 4.834562, 120, 0, 2453, 0, 0),
(79506, 28529, 0, 609, 1, 2, 1778.276, -5801.901, 115.6569, 4.799655, 120, 0, 2453, 0, 0),
(79533, 28529, 0, 609, 1, 2, 1774.276, -5802.383, 116.0229, 4.864975, 120, 0, 2453, 0, 0),
(79535, 28529, 0, 609, 1, 2, 1769.404, -5802.749, 116.2538, 4.799655, 120, 0, 2453, 0, 0),
(79542, 28529, 0, 609, 1, 2, 1782.644, -5801.294, 115.2809, 4.817109, 120, 0, 2453, 0, 0),
(79549, 28529, 0, 609, 1, 2, 1815.021, -5796.956, 115.7996, 5.846853, 120, 0, 2453, 0, 0),
(79553, 28529, 0, 609, 1, 2, 1757.576, -5839.036, 116.8953, 1.64061, 120, 0, 2453, 0, 0),
(79561, 28529, 0, 609, 1, 2, 1761.23, -5838.272, 116.5603, 1.692969, 120, 0, 2453, 0, 0),
(79570, 28529, 0, 609, 1, 2, 1761.317, -5841.41, 116.7594, 1.658063, 120, 0, 2453, 0, 0),
(81088, 28529, 0, 609, 1, 2, 1765.055, -5837.601, 116.4999, 1.72583, 120, 0, 2453, 0, 0),
(81089, 28529, 0, 609, 1, 2, 1765.097, -5841.085, 116.6488, 1.658063, 120, 0, 2453, 0, 0),
(82999, 28529, 0, 609, 1, 2, 1836.332, -5800.062, 102.0841, 5.462881, 120, 0, 2453, 0, 0),
(83011, 28529, 0, 609, 1, 2, 1824.743, -5802.465, 103.7019, 5.899213, 120, 0, 2453, 0, 0),
(83012, 28529, 0, 609, 1, 2, 1803.142, -5801.152, 114.9626, 6.056293, 120, 0, 2453, 0, 0),
(83013, 28529, 0, 609, 1, 2, 1774.37, -5836.22, 116.9071, 1.780236, 120, 0, 2453, 0, 0),
(83014, 28529, 0, 609, 1, 2, 1774.906, -5839.776, 117.0873, 1.692969, 120, 0, 2453, 0, 0),
(83015, 28529, 0, 609, 1, 2, 1769.941, -5840.487, 116.815, 1.692969, 120, 0, 2453, 0, 0),
(83037, 28529, 0, 609, 1, 2, 1804.492, -5837.145, 117.5094, 0.3316126, 120, 0, 2453, 0, 0),
(83044, 28529, 0, 609, 1, 2, 1811.354, -5831.025, 106.4223, 0.1745329, 120, 0, 2453, 0, 0),
(83045, 28529, 0, 609, 1, 2, 1825.835, -5831.765, 102.5963, 0.4712389, 120, 0, 2453, 0, 0),
(83047, 28529, 0, 609, 1, 2, 1757.339, -5841.901, 117.1916, 1.605703, 120, 0, 2453, 0, 0),
(83059, 28529, 0, 609, 1, 2, 1769.622, -5837.14, 116.6763, 1.710423, 120, 0, 2453, 0, 0),
(83060, 28529, 0, 609, 1, 2, 1819.801, -5842.832, 116.3475, 6.248279, 120, 0, 2453, 0, 0),
(83066, 28529, 0, 609, 1, 2, 1834.855, -5850.994, 101.5225, 0.3316126, 120, 0, 2453, 0, 0),
(83067, 28529, 0, 609, 1, 2, 1845.36, -6008.437, 149.8176, 4.57146, 120, 0, 2453, 0, 0), 
(83068, 28529, 0, 609, 1, 2, 1728.292, -5868.477, 116.2078, 3.176499, 120, 0, 2453, 0, 0),
(83089, 28529, 0, 609, 1, 2, 1728.172, -5875.481, 116.2309, 3.054326, 120, 0, 2453, 0, 0),
(83124, 28529, 0, 609, 1, 2, 1811.685, -6003.792, 117.6583, 4.825852, 120, 0, 2453, 0, 0),
(83126, 28529, 0, 609, 1, 2, 1664.133, -5870.508, 116.2591, 0.418879, 120, 0, 2453, 0, 0),
(83132, 28529, 0, 609, 1, 2, 1660.333, -5928.868, 122.5983, 3.333579, 120, 0, 2453, 0, 0),
(83133, 28529, 0, 609, 1, 2, 1646.828, -5919.673, 118.1512, 0.8726646, 120, 0, 2453, 0, 0),
(83136, 28529, 0, 609, 1, 2, 1645.689, -5907.14, 116.2535, 5.654867, 120, 0, 2453, 0, 0),
(83138, 28529, 0, 609, 1, 2, 1659.158, -5966.054, 131.1367, 1.570796, 120, 0, 2453, 0, 0),
(83140, 28529, 0, 609, 1, 2, 1658.88, -5977.833, 132.8795, 1.466077, 120, 0, 2453, 0, 0),
(83142, 28529, 0, 609, 1, 2, 1658.787, -5937.808, 124.3198, 3.141593, 120, 0, 2453, 0, 0),
(83144, 28529, 0, 609, 1, 2, 1647.253, -5946.368, 124.967, 6.230825, 120, 0, 2453, 0, 0),
(83145, 28529, 0, 609, 1, 2, 1646.972, -5965.068, 130.8264, 1.37881, 120, 0, 2453, 0, 0),
(83147, 28529, 0, 609, 1, 2, 1655.165, -5998.201, 133.583, 1.58825, 120, 0, 2453, 0, 0),
(83158, 28529, 0, 609, 1, 2, 1657.516, -5953.328, 127.2481, 3.228859, 120, 0, 2453, 0, 0),
(83159, 28529, 0, 609, 1, 2, 1658.34, -5945.339, 125.518, 3.333579, 120, 0, 2453, 0, 0), 
(85532, 28529, 0, 609, 1, 2, 1646.554, -5997.492, 133.5836, 1.448623, 120, 0, 2453, 0, 0),
(85533, 28529, 0, 609, 1, 2, 1646.978, -5953.929, 127.1546, 6.038839, 120, 0, 2453, 0, 0),
(85534, 28529, 0, 609, 1, 2, 1647.901, -5940.088, 123.5596, 0.1047198, 120, 0, 2453, 0, 0),
(85535, 28529, 0, 609, 1, 2, 1646.488, -5976.733, 132.8795, 1.308997, 120, 0, 2453, 0, 0),
(85536, 28529, 0, 609, 1, 2, 1648.731, -5929.063, 121.1707, 0.08726646, 120, 0, 2453, 0, 0),
(85537, 28529, 0, 609, 1, 2, 1705.063, -5879.186, 116.2465, 2.897247, 120, 0, 2453, 0, 0),
(85538, 28529, 0, 609, 1, 2, 1609.024, -5754.198, 119.357, 5.113815, 120, 0, 2453, 0, 0),
(85539, 28529, 0, 609, 1, 2, 1618.91, -5760.717, 116.243, 5.009095, 120, 0, 2453, 0, 0),
(85540, 28529, 0, 609, 1, 2, 1656.072, -5805.004, 116.2052, 0.296706, 120, 0, 2453, 0, 0),
(85541, 28529, 0, 609, 1, 2, 1651.839, -5846.804, 116.1708, 6.213372, 120, 0, 2453, 0, 0),
(85542, 28529, 0, 609, 1, 2, 1652.588, -5838.151, 116.202, 5.969026, 120, 0, 2453, 0, 0),
(85543, 28529, 0, 609, 1, 2, 1706.375, -5863.752, 116.2515, 3.351032, 120, 0, 2453, 0, 0),
(85544, 28529, 0, 609, 1, 2, 1620.508, -5757.24, 116.4747, 5.201081, 120, 0, 2453, 0, 0),
(85574, 28529, 0, 609, 1, 2, 1688.925, -5842.227, 116.2815, 0.7679449, 120, 0, 2453, 0, 0),
(85575, 28529, 0, 609, 1, 2, 1598.758, -5770.884, 116.1257, 5.288348, 120, 0, 2453, 0, 0),
(85576, 28529, 0, 609, 1, 2, 1596.118, -5771.492, 116.1279, 5.410521, 120, 0, 2453, 0, 0),
(85577, 28529, 0, 609, 1, 2, 1535.319, -6020.205, 149.9427, 2.489439, 120, 0, 2453, 0, 0),
(85578, 28529, 0, 609, 1, 2, 1511.599, -5961.896, 152.1384, 5.3605, 120, 0, 2453, 0, 0), 
(86031, 28529, 0, 609, 1, 2, 1531.513, -5897.081, 129.787, 5.943948, 120, 0, 2453, 0, 0), 
(86053, 28529, 0, 609, 1, 2, 1530.185, -5895.962, 129.912, 5.843255, 120, 0, 2453, 0, 0), 
(86054, 28529, 0, 609, 1, 2, 1529.32, -5894.456, 129.912, 5.753412, 120, 0, 2453, 0, 0),  
(86055, 28529, 0, 609, 1, 2, 1529.022, -5892.746, 129.912, 5.682151, 120, 0, 2453, 0, 0),
(86056, 28529, 0, 609, 1, 2, 1529.327, -5891.036, 129.787, 5.642222, 120, 0, 2453, 0, 0), 
(86057, 28529, 0, 609, 1, 2, 1530.198, -5889.534, 130.037, 5.655405, 120, 0, 2453, 0, 0),
(86058, 28529, 0, 609, 1, 2, 1531.531, -5888.42, 129.787, 5.75581, 120, 0, 2453, 0, 0),
(86059, 28529, 0, 609, 1, 2, 1533.164, -5887.83, 129.537, 5.971915, 120, 0, 2453, 0, 0),
(86060, 28529, 0, 609, 1, 2, 1534.9, -5887.833, 129.1977, 6.251281, 120, 0, 2453, 0, 0),
(86063, 28529, 0, 609, 1, 2, 1598.573, -5759.04, 119.3193, 5.218534, 120, 0, 2453, 0, 0),
(86064, 28529, 0, 609, 1, 2, 1592.801, -5745.275, 119.3197, 5.340707, 120, 0, 2453, 0, 0), 
(86085, 28529, 0, 609, 1, 2, 1590.189, -5744.708, 119.7557, 5.235988, 120, 0, 2453, 0, 0),
(87006, 28529, 0, 609, 1, 2, 1601.184, -5738.64, 119.8708, 5.131268, 120, 0, 2453, 0, 0),
(101332, 28529, 0, 609, 1, 2, 1600.429, -5741.555, 119.3444, 5.131268, 120, 0, 2453, 0, 0), 
(101333, 28529, 0, 609, 1, 2, 1412.832, -5748.321, 131.591, 5.305801, 120, 0, 2453, 0, 0), 
(101334, 28529, 0, 609, 1, 2, 1428.99, -5739.668, 131.2932, 4.660029, 120, 0, 2453, 0, 0),
(101335, 28529, 0, 609, 1, 2, 1387.051, -5708.231, 136.3472, 5.689773, 120, 0, 2453, 0, 0),
(101336, 28529, 0, 609, 1, 2, 1392.485, -5701.703, 135.8899, 5.445427, 120, 0, 2453, 0, 0), 
(101337, 28529, 0, 609, 1, 2, 1381.503, -5725.912, 144.2075, 0.7853982, 120, 0, 2453, 0, 0),
-- Scarlet Commander
(101338, 28530, 0, 609, 1, 2, 1532.751, -5892.1797, 129.371, 6.078036, 120, 0, 2699, 0, 2),
(101339, 28530, 0, 609, 1, 2, 1756.149, -5834.704, 116.5814, 3.286978, 120, 0, 2699, 0, 2),
(101340, 28530, 0, 609, 1, 2, 1783.689, -5806.347, 114.3748, 0.1292475, 120, 0, 2699, 0, 2),
-- Scarlet Preacher
(101341, 28594, 0, 609, 1, 2, 1390.558, -5703.662, 136.3209, 2.282122, 120, 0, 2453, 1982, 0),
(101342, 28594, 0, 609, 1, 2, 1390.572, -5703.678, 136.3188, 5.372028, 120, 0, 2453, 1982, 2),
(101343, 28594, 0, 609, 1, 2, 1360.449, -5683.808, 138.7448, 5.587841, 120, 0, 2453, 1982, 0),
(117312, 28594, 0, 609, 1, 2, 1488.34, -5813.331, 131.335, 1.720976, 120, 0, 2453, 1982, 2),
(117313, 28594, 0, 609, 1, 2, 1484.236, -5850.959, 131.3351, 3.80808, 120, 0, 2453, 1982, 2),
-- Acherus Dummy
(117314, 28367, 0, 609, 1, 2, 1676.557, -5945.135, 126.8824, 1.186824, 120, 0, 8982, 0, 2),
-- Havenshire Stallion
(117315, 28605, 0, 609, 1, 2, 2177.534, -5806.438, 101.4173, 3.543018, 120, 0, 2453, 0, 0),
(117316, 28605, 0, 609, 1, 2, 2221.63, -5881.24, 101.211, 4.74729, 120, 0, 2453, 0, 0),
(117317, 28605, 0, 609, 1, 2, 2206.62, -5840.55, 101.48, 1.43117, 120, 0, 2453, 0, 0),
(117318, 28605, 0, 609, 1, 2, 2209.9, -5840.27, 101.428, 2.35619, 120, 0, 2453, 0, 0),
(117319, 28605, 0, 609, 1, 2, 2204.79, -5840.43, 101.576, 1.13446, 120, 0, 2453, 0, 0),
(117320, 28605, 0, 609, 1, 2, 2199.98, -5871.52, 101.408, 4.34587, 120, 0, 2453, 0, 0),
(117321, 28605, 0, 609, 1, 2, 2228.12, -5818.03, 101.445, 1.43117, 120, 0, 2453, 0, 0),
(117322, 28605, 0, 609, 1, 2, 2232.95, -5814.65, 101.368, 2.35619, 120, 0, 2453, 0, 0),
-- Havenshire Mare
(117323, 28606, 0, 609, 1, 2, 2172.505, -5810.831, 101.4043, 1.082104, 120, 0, 2453, 0, 0),
(120795, 28606, 0, 609, 1, 2, 2237.33, -5860.84, 101.292, 5.42797, 120, 0, 2453, 0, 0),
(120906, 28606, 0, 609, 1, 2, 2235.99, -5863.17, 101.269, 0.017453, 120, 0, 2453, 0, 0),
(125330, 28606, 0, 609, 1, 2, 2221.94, -5888.14, 101.022, 1.69297, 120, 0, 2453, 0, 0),
(125692, 28606, 0, 609, 1, 2, 2218.83, -5888.31, 100.995, 1.58825, 120, 0, 2453, 0, 0),
(129164, 28606, 0, 609, 1, 2, 2203.25, -5833.98, 101.44, 5.70723, 120, 0, 2453, 0, 0),
(129435, 28606, 0, 609, 1, 2, 2206.26, -5833.58, 101.435, 5.044, 120, 0, 2453, 0, 0),
(129446, 28606, 0, 609, 1, 2, 2185.22, -5867.83, 101.395, 4.85202, 120, 0, 2453, 0, 0),
(129452, 28606, 0, 609, 1, 2, 2197.14, -5870.83, 101.403, 4.57276, 120, 0, 2453, 0, 0),
(129458, 28606, 0, 609, 1, 2, 2225.69, -5815.68, 101.445, 0.488692, 120, 0, 2453, 0, 0),
 -- Havenshire Colt
(133918, 28607, 0, 609, 1, 2, 2212.25, -5881.55, 101.11, 4.59022, 120, 0, 2062, 0, 0),
(133919, 28607, 0, 609, 1, 2, 2176, -5810.381, 101.4176, 2.094395, 120, 0, 2062, 0, 0),
(133920, 28607, 0, 609, 1, 2, 2208.6, -5833.48, 101.428, 4.7822, 120, 0, 2062, 0, 0),
(134658, 28607, 0, 609, 1, 2, 2202.68, -5838.43, 101.498, 0.069813, 120, 0, 2062, 0, 0),
(134670, 28607, 0, 609, 1, 2, 2186.6, -5868.27, 101.39, 4.90438, 120, 0, 2062, 0, 0),
(136255, 28607, 0, 609, 1, 2, 2189.17, -5870.81, 101.378, 2.00713, 120, 0, 2062, 0, 0),
(136472, 28607, 0, 609, 1, 2, 2187.83, -5868.67, 101.387, 4.03171, 120, 0, 2062, 0, 0),
(136473, 28607, 0, 609, 1, 2, 2224.77, -5811.89, 101.434, 0.820305, 120, 0, 2062, 0, 0),
(136558, 28607, 0, 609, 1, 2, 2232.4, -5818.69, 101.392, 2.26893, 120, 0, 2062, 0, 0);

-- waypoints
DELETE FROM creature_movement WHERE id IN (101339,101340,101342,117312,117313,117314,101338);
INSERT INTO creature_movement (id, point, position_x, position_y, position_z, waittime, script_id, textid1, textid2, textid3, textid4, textid5, emote, spell, wpguid, orientation, model1, model2) VALUES
(117314,1,1676.557,-5945.135,126.8824,5000,0,0,0,0,0,0,0,0,0,1.186824,0,0),
(117314,2,1676.557,-5945.135,126.8824,10000,2836701,0,0,0,0,0,0,0,0,1.186824,0,0),
(117314,3,1676.557,-5945.135,126.8824,15000,0,0,0,0,0,0,0,0,0,1.186824,0,0),
-- Scarlet Commander
(101339,1,1775.91,-5832.22,116.268,0,0,0,0,0,0,0,0,0,0,3.27545,0,0),
(101339,2,1755.28,-5834.67,116.466,0,0,0,0,0,0,0,0,0,0,0.155067,0,0),
(101340,1,1762.27,-5808.16,116.622,0,0,0,0,0,0,0,0,0,0,0.0435456,0,0),
(101340,2,1784.43,-5806.17,114.238,0,0,0,0,0,0,0,0,0,0,3.29274,0,0),
-- Scarlet Preacher
(101342,1,1402.94,-5716.94,133.387,0,0,0,0,0,0,0,0,0,0,5.27582,0,0),(101342,2,1423.3,-5747.93,131.208,0,0,0,0,0,0,0,0,0,0,5.27415,0,0),(101342,3,1402.68,-5716.63,133.475,0,0,0,0,0,0,0,0,0,0,2.18361,0,0),
(101342,4,1397.68,-5710.01,135.097,0,0,0,0,0,0,0,0,0,0,2.44907,0,0),(101342,5,1389.76,-5704.78,136.089,0,0,0,0,0,0,0,0,0,0,2.54489,0,0),(101342,6,1386.06,-5702.27,138.002,0,0,0,0,0,0,0,0,0,0,2.54489,0,0),
(101342,7,1366.41,-5688.04,137.968,3000,0,0,0,0,0,0,0,0,0,2.54489,0,0),(101342,8,1386.36,-5702.1,138.001,0,0,0,0,0,0,0,0,0,0,5.66684,0,0),(101342,9,1390.1,-5704.74,136.054,0,0,0,0,0,0,0,0,0,0,5.66684,0,0),
(117312,1,1484.85,-5802.34,131.228,0,0,0,0,0,0,0,0,0,0,2.09093,0,0),(117312,2,1474.38,-5788.07,131.232,0,0,0,0,0,0,0,0,0,0,2.24565,0,0),(117312,3,1451.5,-5759.41,131.232,0,0,0,0,0,0,0,0,0,0,2.40901,0,0),
(117312,4,1438.17,-5750.76,131.21,0,0,0,0,0,0,0,0,0,0,2.77606,0,0),(117312,5,1425.59,-5747.92,131.21,0,0,0,0,0,0,0,0,0,0,3.33919,0,0),(117312,6,1416.48,-5752.81,131.263,0,0,0,0,0,0,0,0,0,0,3.84342,0,0),
(117312,7,1410.85,-5760.42,131.447,0,0,0,0,0,0,0,0,0,0,4.38253,0,0),(117312,8,1397.58,-5797.64,131.217,0,0,0,0,0,0,0,0,0,0,4.52391,0,0),(117312,9,1398.15,-5805.79,131.242,0,0,0,0,0,0,0,0,0,0,5.00299,0,0),
(117312,10,1402.93,-5815.12,131.215,0,0,0,0,0,0,0,0,0,0,5.33678,0,0),(117312,11,1431.32,-5846.87,131.209,0,0,0,0,0,0,0,0,0,0,5.47815,0,0),(117312,12,1439.07,-5853.76,131.21,0,0,0,0,0,0,0,0,0,0,5.82529,0,0),
(117312,13,1449.41,-5855.99,131.22,0,0,0,0,0,0,0,0,0,0,0.0101976,0,0),(117312,14,1478.43,-5856.03,131.237,0,0,0,0,0,0,0,0,0,0,0.0438187,0,0),(117312,15,1487.95,-5854.48,131.214,0,0,0,0,0,0,0,0,0,0,0.642292,0,0),
(117312,16,1491.59,-5851.32,131.214,0,0,0,0,0,0,0,0,0,0,1.09625,0,0),(117312,17,1493.68,-5843.79,131.213,0,0,0,0,0,0,0,0,0,0,1.60511,0,0),(117312,18,1488.45,-5813.26,131.21,0,0,0,0,0,0,0,0,0,0,1.81953,0,0),
(117313,1,1451.43,-5852.32,131.316,0,0,0,0,0,0,0,0,0,0,2.97292,0,0),(117313,2,1441.34,-5848.45,131.214,0,0,0,0,0,0,0,0,0,0,2.31868,0,0),(117313,3,1415.71,-5822.71,131.208,0,0,0,0,0,0,0,0,0,0,2.34224,0,0),
(117313,4,1402.84,-5805.23,131.217,0,0,0,0,0,0,0,0,0,0,1.9087,0,0),(117313,5,1403.41,-5795.93,131.212,0,0,0,0,0,0,0,0,0,0,1.30316,0,0),(117313,6,1414.64,-5764.5,131.301,0,0,0,0,0,0,0,0,0,0,1.2741,0,0),
(117313,7,1421.97,-5754.72,131.213,0,0,0,0,0,0,0,0,0,0,0.747881,0,0),(117313,8,1431.54,-5753.59,131.21,0,0,0,0,0,0,0,0,0,0,6.13021,0,0),(117313,9,1440.86,-5758.25,131.21,0,0,0,0,0,0,0,0,0,0,5.51839,0,0),
(117313,10,1465.74,-5787.2,131.213,0,0,0,0,0,0,0,0,0,0,5.4532,0,0),(117313,11,1479.13,-5805.14,131.211,0,0,0,0,0,0,0,0,0,0,5.30005,0,0),(117313,12,1485.4,-5822.49,131.219,0,0,0,0,0,0,0,0,0,0,4.99375,0,0),
(117313,13,1487.73,-5844.53,131.216,0,0,0,0,0,0,0,0,0,0,4.72279,0,0),(117313,14,1486.62,-5849.06,131.214,0,0,0,0,0,0,0,0,0,0,4.1039,0,0),(117313,15,1482.41,-5851.55,131.217,0,0,0,0,0,0,0,0,0,0,3.45988,0,0),
(101338,2,1601.17,-5910.01,116.303,0,0,0,0,0,0,0,0,0,0,6.00342,0,0),(101338,3,1643.02,-5910.12,116.266,0,0,0,0,0,0,0,0,0,0,0.520555,0,0),(101338,4,1656.36,-5899.57,116.124,0,0,0,0,0,0,0,0,0,0,0.587314,0,0),
(101338,5,1692.02,-5884.95,116.142,0,0,0,0,0,0,0,0,0,0,6.01834,0,0),(101338,6,1702.86,-5887.94,116.138,0,0,0,0,0,0,0,0,0,0,5.62172,0,0),(101338,7,1736.57,-5907.02,116.123,0,0,0,0,0,0,0,0,0,0,5.80629,0,0),
(101338,8,1798.79,-5933.78,115.968,0,0,0,0,0,0,0,0,0,0,6.01049,0,0),(101338,9,1809.37,-5933.87,115.297,0,0,0,0,0,0,0,0,0,0,0.343049,0,0),(101338,10,1864.98,-5914.6,104.226,0,0,0,0,0,0,0,0,0,0,0.331268,0,0),
(101338,11,1885.84,-5907.43,102.989,0,0,0,0,0,0,0,0,0,0,0.778945,0,0),(101338,12,1894.42,-5891.76,102.687,0,0,0,0,0,0,0,0,0,0,1.25411,0,0),(101338,13,1895.85,-5875.9,101.466,0,0,0,0,0,0,0,0,0,0,1.51329,0,0),
(101338,14,1881.66,-5850.79,102.244,0,0,0,0,0,0,0,0,0,0,2.27513,0,0),(101338,15,1852.78,-5819.59,99.8482,0,0,0,0,0,0,0,0,0,0,3.03697,0,0),(101338,16,1815.8,-5818.1,105.145,0,0,0,0,0,0,0,0,0,0,3.12336,0,0),
(101338,17,1749.11,-5822.59,116.12,0,0,0,0,0,0,0,0,0,0,3.13514,0,0),(101338,18,1731.1,-5820.91,116.122,0,0,0,0,0,0,0,0,0,0,2.228,0,0),(101338,19,1707.71,-5788.65,114.503,0,0,0,0,0,0,0,0,0,0,2.55002,0,0),
(101338,20,1688.41,-5781.75,114.617,0,0,0,0,0,0,0,0,0,0,2.96235,0,0),(101338,21,1652.1,-5780.44,116.135,0,0,0,0,0,0,0,0,0,0,3.13514,0,0),(101338,22,1604.93,-5783.24,116.183,0,0,0,0,0,0,0,0,0,0,3.20583,0,0),
(101338,23,1554.09,-5787.14,119.562,0,0,0,0,0,0,0,0,0,0,3.1587,0,0),(101338,24,1525.3,-5788.32,127.109,0,0,0,0,0,0,0,0,0,0,3.34719,0,0),(101338,25,1501.55,-5795.64,131.149,0,0,0,0,0,0,0,0,0,0,3.56318,0,0),
(101338,26,1488.25,-5802.89,131.248,0,0,0,0,0,0,0,0,0,0,4.43889,0,0),(101338,27,1486.45,-5811.1,131.213,0,0,0,0,0,0,0,0,0,0,4.81274,0,0),(101338,28,1491.52,-5862.06,131.213,0,0,0,0,0,0,0,0,0,0,5.16067,0,0),
(101338,29,1504.88,-5884.58,131.182,0,0,0,0,0,0,0,0,0,0,5.78506,0,0),(101338,30,1535.07,-5893.31,129.066,0,0,0,0,0,0,0,0,0,0,6.08743,0,0);
-- creature links
DELETE FROM creature_linking WHERE guid IN (86031,86053,86054,86055,86056,86057,86058,86059,86060,101341);
INSERT INTO creature_linking (guid, master_guid, flag) VALUES
(101341, 101342, 512),(86031, 101338, 512),(86053, 101338, 512),(86054, 101338, 512),(86055, 101338, 512),(86056, 101338, 512),(86057, 101338, 512),(86058, 101338, 512),(86059, 101338, 512),(86060, 101338, 512);
-- event
DELETE FROM dbscripts_on_creature_movement WHERE id = 2836701;
INSERT INTO dbscripts_on_creature_movement VALUES
(2836701,1,31,28662,100,0,0,0,0,0,0,0,0,0,0,0,''), -- check if creature is alive
(2836701,2,0,0,0,28662,100,7,2000000411,2000000412,0,0,0,0,0,0,''),
(2836701,5,31,28548,100,0,0,0,0,0,0,0,0,0,0,0,''), -- check if creature is alive
(2836701,6,0,0,0,28548,100,7,2000000413,0,0,0,0,0,0,0,''),
(2836701,13,1,1,0,28548,100,7,5,274,0,0,0,0,0,0,'random emote');
DELETE FROM db_script_string WHERE entry BETWEEN 2000000411 AND 2000000413;
INSERT INTO db_script_string (entry, content_default, content_loc1, content_loc2, content_loc3, content_loc4, content_loc5, content_loc6, content_loc7, content_loc8, sound, type, language, emote, comment) VALUES 
(2000000411,'What are we to do? We\'ve lost everything!',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,0,5,NULL),
(2000000412,'Havenshire is lost.',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,0,5,NULL),
(2000000413,'We fight! We push them back, just as we have always done!',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,0,15,NULL);
-- missing objects
-- empty guids reused -- UDB ONLY
DELETE FROM gameobject WHERE guid IN
(65255,65291,65375,66691,66696,66697,66698,66699,66700,66701,66702,66703,66704,66705,66708,66709,66710,66840,66841,66842,66843,66844,66845,66846,66847,66848,66849,66850,66851,93939,93940,
94065,94158,94159,94160,94161,94162,94163,94164,94165,94166,94167);
INSERT INTO gameobject (guid, id, map, spawnMask, phaseMask, position_x, position_y, position_z, orientation, rotation0, rotation1, rotation2, rotation3, spawntimesecs, animprogress, state) VALUES
-- house
(65255,191166,609,1,2,2266.77,-5799.27,97.839,-0.968655,0,0,-0.465613,0.884988,180,0,1),
-- mail box
(65291,190914,609,1,2,2113.54,-5796.06,99.7134,0.67195,-0.001297,0.00416565,0.329686,0.94408,180,0,1),
-- house
(65375,191167,609,1,2,2109.78,-5805.76,96.7227,2.25147,0,0,0.902585,0.430512,180,0,1),
(66691,191173,609,1,2,2108.63,-5888.85,99.7184,-2.67908,0,0,-0.973379,0.229201,180,0,1),
(66696,191169,609,1,2,2054.5,-5880.65,101.061,0.532327,0,0,0.263032,0.964787,180,0,1),
(66697,191171,609,1,2,1936.04,-5792.89,96.8256,0.872664,0,0,0.422618,0.906308,180,0,1),
(66698,191169,609,1,2,2054.5,-5880.65,101.061,0.532327,0,0,0.263032,0.964787,180,0,1),
-- lumber mill
(66699,191191,609,1,2,2091.49,-5680.32,100.272,2.14675,0,0,0.878817,0.47716,180,0,1),
-- stables
(66700,191178,609,1,2,2217.03,-5880.88,100.885,1.5708,0,0,0.707107,0.707107,180,0,1),
-- silos
(66701,190800,609,1,2,2051.61,-5782.35,100.826,1.12139,0,0,0.531775,0.846885,180,0,1),
-- barn
(66702,191172,609,1,2,1929.23,-5880.05,97.7314,2.36492,0,0,0.92554,0.37865,180,0,1),
-- tower
(66703,190568,609,1,2,2377.07,-6045.53,61.521,2.44346,0,0,0.939692,0.34202,180,255,1),
(66704,190789,609,1,2,2366.51,-6037.01,75.3612,2.46091,0,0,0.942641,0.333808,180,0,1),
-- baricade
(66705,190879,609,1,2,2157.1,-5694.98,105.176,-2.60926,0.100891,0.0733604,-0.95587,0.265993,180,0,1),
(66708,190890,609,1,2,2158.05,-5699.04,106.456,-0.881391,0.330425,-0.255406,-0.350611,0.838248,180,0,1),
(66709,190882,609,1,2,2158.24,-5694.42,106.658,0.95993,0,0,0.461748,0.887011,180,0,1),
(66710,190886,609,1,2,2159.14,-5697.77,104.713,-3.09895,-0.061204,-0.0995245,-0.992772,0.0274319,180,0,1),
(66840,190878,609,1,2,2158.66,-5693.46,105.624,3.14156,0.0421166,0.0615225,-0.997213,0.00258374,180,0,1),
(66841,190875,609,1,2,2160.43,-5691.89,106.021,2.35619,-0.0140967,-0.0684423,0.921273,0.382587,180,0,1),
(66842,190876,609,1,2,2159.34,-5694.84,105.415,3.14159,0,0,-1,0,180,0,1),
(66843,190877,609,1,2,2159.55,-5695.07,105.455,2.79252,0.016243,-0.0696001,0.981966,0.175028,180,0,1),
(66844,190870,609,1,2,2171.32,-5700.66,105.886,2.80077,-0.0181217,-0.116454,0.978609,0.168625,180,0,1),
(66845,190885,609,1,2,2160.32,-5697.78,105.062,2.94275,-0.0372086,-0.0788364,0.991509,0.0964853,180,0,1),
(66846,190873,609,1,2,2160.28,-5694.75,105.532,2.47836,-0.0131168,-0.0416002,0.944602,0.325307,180,0,1),
(66847,190869,609,1,2,2167.19,-5700.54,107.617,0.821324,0.146786,-0.305458,0.379759,0.860774,180,0,1),
(66848,190892,609,1,2,2166.22,-5700.03,105.816,1.08086,0.134146,-0.29005,0.477654,0.818366,180,0,1),
(66849,190880,609,1,2,2164.09,-5691.64,106.916,2.82979,-0.0622897,-0.0891228,0.982732,0.149717,180,0,1),
(66850,190859,609,1,2,2169.18,-5698.67,106.002,2.58897,-0.0407338,-0.0906858,0.957691,0.270082,180,0,1),
(66851,190881,609,1,2,2163.73,-5694.48,106.263,2.93795,-0.0458646,-0.122612,0.986681,0.0965575,180,0,1),
(93939,190883,609,1,2,2162.91,-5697.05,106.007,1.07415,0.063015,-0.264695,0.473343,0.837802,180,0,1),
(93940,190861,609,1,2,2175.06,-5703.45,105.77,-3.14088,0.0284739,0.0860357,-0.995881,0.00281557,180,0,1),
(94065,190863,609,1,2,2175.07,-5702.19,106.044,2.38237,-0.0104766,-0.0470209,0.927595,0.370468,180,0,1),
(94158,190868,609,1,2,2175.71,-5705.19,105.456,2.63544,0,0,0.968147,0.250381,180,0,1),
(94159,190864,609,1,2,2177.18,-5703.08,106.062,2.00713,-0.0519929,-0.00577831,0.842955,0.535435,180,0,1),
(94160,190865,609,1,2,2178.62,-5701.81,106.359,2.37365,-0.00524759,-0.0166445,0.927033,0.374572,180,0,1),
(94161,190866,609,1,2,2178.36,-5704.54,105.888,3.02813,-0.0151815,-0.0217628,0.998057,0.0563685,180,0,1),
(94162,190867,609,1,2,2175.85,-5704.97,111.051,1.02974,0,0,0.492424,0.870355,180,0,1),
(94163,190891,609,1,2,2162.82,-5701.18,104.716,-2.22071,0.0748539,0.0447206,-0.892179,0.443185,180,0,1),
(94164,190892,609,1,2,2166.22,-5700.03,105.816,1.08086,0.134146,-0.29005,0.477654,0.818366,180,0,1),
(94165,190893,609,1,2,2166.32,-5705.36,104.243,-0.562665,0.0793948,-0.0132055,-0.277456,0.957361,180,0,1),
(94166,190887,609,1,2,2151.4,-5697.19,103.789,2.22597,-0.0430837,-0.0871992,0.892773,0.439883,180,0,1),
(94167,190884,609,1,2,2155.83,-5697.56,105.026,0.925538,-0.160909,0.156031,0.449443,0.864733,180,0,1);
    

        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
        -- -- PLACE UPDATE SQL ABOVE -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -

        -- If we get here ok, commit the changes
        IF bRollback = TRUE THEN
            ROLLBACK;
            SHOW ERRORS;
            SELECT '* UPDATE FAILED *' AS `===== Status =====`,@cCurResult AS `===== DB is on Version: =====`;



        ELSE
            COMMIT;
            SELECT '* UPDATE COMPLETE *' AS `===== Status =====`,@cNewResult AS `===== DB is now on Version =====`;
        END IF;
    ELSE    -- Current version is not the expected version
        IF (@cCurResult = @cNewResult) THEN    -- Does the current version match the new version
            SELECT '* UPDATE SKIPPED *' AS `===== Status =====`,@cCurResult AS `===== DB is already on Version =====`;
        ELSE    -- Current version is not one related to this update
            IF(@cCurResult IS NULL) THEN    -- Something has gone wrong
                SELECT '* UPDATE FAILED *' AS `===== Status =====`,'Unable to locate DB Version Information' AS `============= Error Message =============`;
            ELSE
		IF(@cOldResult IS NULL) THEN    -- Something has gone wrong
		    SET @cCurVersion := (SELECT `version` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
		    SET @cCurStructure := (SELECT `STRUCTURE` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
		    SET @cCurContent := (SELECT `Content` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
                    SET @cCurOutput = CONCAT(@cCurVersion, '_', @cCurStructure, '_', @cCurContent, ' - ',@cCurResult);
                    SET @cOldResult = CONCAT('Rel',@cOldVersion, '_', @cOldStructure, '_', @cOldContent, ' - ','IS NOT APPLIED');
                    SELECT '* UPDATE SKIPPED *' AS `===== Status =====`,@cOldResult AS `=== Expected ===`,@cCurOutput AS `===== Found Version =====`;
		ELSE
		    SET @cCurVersion := (SELECT `version` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
		    SET @cCurStructure := (SELECT `STRUCTURE` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
		    SET @cCurContent := (SELECT `Content` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
                    SET @cCurOutput = CONCAT(@cCurVersion, '_', @cCurStructure, '_', @cCurContent, ' - ',@cCurResult);
                    SELECT '* UPDATE SKIPPED *' AS `===== Status =====`,@cOldResult AS `=== Expected ===`,@cCurOutput AS `===== Found Version =====`;
                END IF;
            END IF;
        END IF;
    END IF;
END $$

DELIMITER ;

-- Execute the procedure
CALL update_mangos();

-- Drop the procedure
DROP PROCEDURE IF EXISTS `update_mangos`;

