-- ----------------------------------------
-- Added to prevent timeout's while loading
-- ----------------------------------------
SET GLOBAL net_read_timeout=30;
SET GLOBAL net_write_timeout=60;
SET GLOBAL net_buffer_length=1000000; 
SET GLOBAL max_allowed_packet=1000000000;
SET GLOBAL connect_timeout=10000000;

-- --------------------------------------------------------------------------------
-- This is an attempt to create a full transactional MaNGOS update (v1.3)
-- --------------------------------------------------------------------------------
DROP PROCEDURE IF EXISTS `update_mangos`; 

DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `update_mangos`()
BEGIN
    DECLARE bRollback BOOL  DEFAULT FALSE ;
    DECLARE CONTINUE HANDLER FOR SQLEXCEPTION SET `bRollback` = TRUE;

    -- Current Values (TODO - must be a better way to do this)
    SET @cCurVersion := (SELECT `version` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
    SET @cCurStructure := (SELECT structure FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
    SET @cCurContent := (SELECT content FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);

    -- Expected Values
    SET @cOldVersion = '21'; 
    SET @cOldStructure = '02'; 
    SET @cOldContent = '33';

    -- New Values
    SET @cNewVersion = '21';
    SET @cNewStructure = '02';
    SET @cNewContent = '34';
                            -- DESCRIPTION IS 30 Characters MAX    
    SET @cNewDescription = 'DK_zone_ Part1';

                        -- COMMENT is 150 Characters MAX
    SET @cNewComment = 'DK_zone_ Part1';

    -- Evaluate all settings
    SET @cCurResult := (SELECT description FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
    SET @cOldResult := (SELECT description FROM db_version WHERE `version`=@cOldVersion AND `structure`=@cOldStructure AND `content`=@cOldContent);
    SET @cNewResult := (SELECT description FROM db_version WHERE `version`=@cNewVersion AND `structure`=@cNewStructure AND `content`=@cNewContent);

    IF (@cCurResult = @cOldResult) THEN    -- Does the current version match the expected version
        -- APPLY UPDATE
        START TRANSACTION;

        -- UPDATE THE DB VERSION
        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
        INSERT INTO `db_version` VALUES (@cNewVersion, @cNewStructure, @cNewContent, @cNewDescription, @cNewComment);
        SET @cNewResult := (SELECT description FROM db_version WHERE `version`=@cNewVersion AND `structure`=@cNewStructure AND `content`=@cNewContent);

        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
        -- -- PLACE UPDATE SQL BELOW -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -

-- ---------------------------
 -- DK Starting Zone - phase 1 - part1.
 -- ---------------------------
 
 -- duplicates removed. (will reuse them in next phases)
 DELETE FROM creature WHERE guid IN (129549,129561,129552,129551,129524,129513,129559,129523,129527,129515,129537,129536,129560,129514,129542,129508,129539,129510,129538,129534,129528,129535,129525,129512,
 129509,129505,129506,129504,129500,129501,129543,129540,129526,129541,129511,129554,128554,128556,128555,129502,129503,129507,129557,128517,128518,128519,128520,129461,129462,129463,129280,128498,128499,
 128703,128638,128634,128635,128633,128637,128628,128627,128636,128716,128727,128632,128631,128630,128724,128717,128721,128669,128719,128718,128720,128686,128629,128639,129255,129259,129263,129293,129295,
 129305,129294,129298,129310,129214,129236,129215,129251,129235,129246,129249,129248,129247,129245,129152,129151,128908,128883,128906,128881,128907,128882,128903,128878,128892,128867,128886,128861,128862,
 128887,128871,128884,128896,128909,128890,128865,128877,128902,128888,128863,128872,128897,128891,128866,128900,128875,128640,128704,128642,128723,128726,128729,128732,128725,128728,128731,128673,128672,
 128665,128671,128670,128666,128664,128663,128667,128650,128649,128647,128646,128733,128648,128645,128644,128734,128643,128685,128714,128715,128651,128662,128668,128674,128675,128682,128676,128713,128681,
 128736,128708,128711,128705,128706,128712,128707,128710,128709,128677,128678,128683,128679,128680,128684,128641,128697,129165,129168,128701,128702,128698,128699,129171,129170,128700,129169,128722,128521,
 128730,129270,129271,129283,129272,128786,128794,128776,128763,128784);
 DELETE FROM creature_addon WHERE guid IN (129549,129561,129552,129551,129524,129513,129559,129523,129527,129515,129537,129536,129560,129514,129542,129508,129539,129510,129538,129534,129528,129535,129525,
 129512,129509,129505,129506,129504,129500,129501,129543,129540,129526,129541,129511,129554,128554,128556,128555,129502,129503,129507,129557,128517,128518,128519,128520,129461,129462,129463,129280,128498,
 128499,128703,128638,128634,128635,128633,128637,128628,128627,128636,128716,128727,128632,128631,128630,128724,128717,128721,128669,128719,128718,128720,128686,128629,128639,129255,129259,129263,129293,
 129295,129305,129294,129298,129310,129214,129236,129215,129251,129235,129246,129249,129248,129247,129245,129152,129151,128908,128883,128906,128881,128907,128882,128903,128878,128892,128867,128886,128861,
 128862,128887,128871,128884,128896,128909,128890,128865,128877,128902,128888,128863,128872,128897,128891,128866,128900,128875,128640,128704,128642,128723,128726,128729,128732,128725,128728,128731,128673,
 128672,128665,128671,128670,128666,128664,128663,128667,128650,128649,128647,128646,128733,128648,128645,128644,128734,128643,128685,128714,128715,128651,128662,128668,128674,128675,128682,128676,128713,
 128681,128736,128708,128711,128705,128706,128712,128707,128710,128709,128677,128678,128683,128679,128680,128684,128641,128697,129165,129168,128701,128702,128698,128699,129171,129170,128700,129169,128722,
 128521,128730,129270,129271,129283,129272,128786,128794,128776,128763,128784);
 DELETE FROM creature_movement WHERE id IN (129549,129561,129552,129551,129524,129513,129559,129523,129527,129515,129537,129536,129560,129514,129542,129508,129539,129510,129538,129534,129528,129535,129525,
 129512,129509,129505,129506,129504,129500,129501,129543,129540,129526,129541,129511,129554,128554,128556,128555,129502,129503,129507,129557,128517,128518,128519,128520,129461,129462,129463,129280,128498,
 128499,128703,128638,128634,128635,128633,128637,128628,128627,128636,128716,128727,128632,128631,128630,128724,128717,128721,128669,128719,128718,128720,128686,128629,128639,129255,129259,129263,129293,
 129295,129305,129294,129298,129310,129214,129236,129215,129251,129235,129246,129249,129248,129247,129245,129152,129151,128908,128883,128906,128881,128907,128882,128903,128878,128892,128867,128886,128861,
 128862,128887,128871,128884,128896,128909,128890,128865,128877,128902,128888,128863,128872,128897,128891,128866,128900,128875,128640,128704,128642,128723,128726,128729,128732,128725,128728,128731,128673,
 128672,128665,128671,128670,128666,128664,128663,128667,128650,128649,128647,128646,128733,128648,128645,128644,128734,128643,128685,128714,128715,128651,128662,128668,128674,128675,128682,128676,128713,
 128681,128736,128708,128711,128705,128706,128712,128707,128710,128709,128677,128678,128683,128679,128680,128684,128641,128697,129165,129168,128701,128702,128698,128699,129171,129170,128700,129169,128722,
 128521,128730,129270,129271,129283,129272,128786,128794,128776,128763,128784);
 DELETE FROM game_event_creature WHERE guid IN (129549,129561,129552,129551,129524,129513,129559,129523,129527,129515,129537,129536,129560,129514,129542,129508,129539,129510,129538,129534,129528,129535,
 129525,129512,129509,129505,129506,129504,129500,129501,129543,129540,129526,129541,129511,129554,128554,128556,128555,129502,129503,129507,129557,128517,128518,128519,128520,129461,129462,129463,129280,
 128498,128499,128703,128638,128634,128635,128633,128637,128628,128627,128636,128716,128727,128632,128631,128630,128724,128717,128721,128669,128719,128718,128720,128686,128629,128639,129255,129259,129263,
 129293,129295,129305,129294,129298,129310,129214,129236,129215,129251,129235,129246,129249,129248,129247,129245,129152,129151,128908,128883,128906,128881,128907,128882,128903,128878,128892,128867,128886,
 128861,128862,128887,128871,128884,128896,128909,128890,128865,128877,128902,128888,128863,128872,128897,128891,128866,128900,128875,128640,128704,128642,128723,128726,128729,128732,128725,128728,128731,
 128673,128672,128665,128671,128670,128666,128664,128663,128667,128650,128649,128647,128646,128733,128648,128645,128644,128734,128643,128685,128714,128715,128651,128662,128668,128674,128675,128682,128676,
 128713,128681,128736,128708,128711,128705,128706,128712,128707,128710,128709,128677,128678,128683,128679,128680,128684,128641,128697,129165,129168,128701,128702,128698,128699,129171,129170,128700,129169,
 128722,128521,128730,129270,129271,129283,129272,128786,128794,128776,128763,128784);
 DELETE FROM game_event_creature_data WHERE guid IN (129549,129561,129552,129551,129524,129513,129559,129523,129527,129515,129537,129536,129560,129514,129542,129508,129539,129510,129538,129534,129528,129535,
 129525,129512,129509,129505,129506,129504,129500,129501,129543,129540,129526,129541,129511,129554,128554,128556,128555,129502,129503,129507,129557,128517,128518,128519,128520,129461,129462,129463,129280,
 128498,128499,128703,128638,128634,128635,128633,128637,128628,128627,128636,128716,128727,128632,128631,128630,128724,128717,128721,128669,128719,128718,128720,128686,128629,128639,129255,129259,129263,
 129293,129295,129305,129294,129298,129310,129214,129236,129215,129251,129235,129246,129249,129248,129247,129245,129152,129151,128908,128883,128906,128881,128907,128882,128903,128878,128892,128867,128886,
 128861,128862,128887,128871,128884,128896,128909,128890,128865,128877,128902,128888,128863,128872,128897,128891,128866,128900,128875,128640,128704,128642,128723,128726,128729,128732,128725,128728,128731,
 128673,128672,128665,128671,128670,128666,128664,128663,128667,128650,128649,128647,128646,128733,128648,128645,128644,128734,128643,128685,128714,128715,128651,128662,128668,128674,128675,128682,128676,
 128713,128681,128736,128708,128711,128705,128706,128712,128707,128710,128709,128677,128678,128683,128679,128680,128684,128641,128697,129165,129168,128701,128702,128698,128699,129171,129170,128700,129169,
 128722,128521,128730,129270,129271,129283,129272,128786,128794,128776,128763,128784);
 DELETE FROM creature_battleground WHERE guid IN (129549,129561,129552,129551,129524,129513,129559,129523,129527,129515,129537,129536,129560,129514,129542,129508,129539,129510,129538,129534,129528,129535,
 129525,129512,129509,129505,129506,129504,129500,129501,129543,129540,129526,129541,129511,129554,128554,128556,128555,129502,129503,129507,129557,128517,128518,128519,128520,129461,129462,129463,129280,
 128498,128499,128703,128638,128634,128635,128633,128637,128628,128627,128636,128716,128727,128632,128631,128630,128724,128717,128721,128669,128719,128718,128720,128686,128629,128639,129255,129259,129263,
 129293,129295,129305,129294,129298,129310,129214,129236,129215,129251,129235,129246,129249,129248,129247,129245,129152,129151,128908,128883,128906,128881,128907,128882,128903,128878,128892,128867,128886,
 128861,128862,128887,128871,128884,128896,128909,128890,128865,128877,128902,128888,128863,128872,128897,128891,128866,128900,128875,128640,128704,128642,128723,128726,128729,128732,128725,128728,128731,
 128673,128672,128665,128671,128670,128666,128664,128663,128667,128650,128649,128647,128646,128733,128648,128645,128644,128734,128643,128685,128714,128715,128651,128662,128668,128674,128675,128682,128676,
 128713,128681,128736,128708,128711,128705,128706,128712,128707,128710,128709,128677,128678,128683,128679,128680,128684,128641,128697,129165,129168,128701,128702,128698,128699,129171,129170,128700,129169,
 128722,128521,128730,129270,129271,129283,129272,128786,128794,128776,128763,128784);
 DELETE FROM creature_linking WHERE guid IN (129549,129561,129552,129551,129524,129513,129559,129523,129527,129515,129537,129536,129560,129514,129542,129508,129539,129510,129538,129534,129528,129535,129525,
 129512,129509,129505,129506,129504,129500,129501,129543,129540,129526,129541,129511,129554,128554,128556,128555,129502,129503,129507,129557,128517,128518,128519,128520,129461,129462,129463,129280,128498,128499,
 128703,128638,128634,128635,128633,128637,128628,128627,128636,128716,128727,128632,128631,128630,128724,128717,128721,128669,128719,128718,128720,128686,128629,128639,129255,129259,129263,129293,129295,129305,
 129294,129298,129310,129214,129236,129215,129251,129235,129246,129249,129248,129247,129245,129152,129151,128908,128883,128906,128881,128907,128882,128903,128878,128892,128867,128886,128861,128862,128887,128871,
 128884,128896,128909,128890,128865,128877,128902,128888,128863,128872,128897,128891,128866,128900,128875,128640,128704,128642,128723,128726,128729,128732,128725,128728,128731,128673,128672,128665,128671,128670,
 128666,128664,128663,128667,128650,128649,128647,128646,128733,128648,128645,128644,128734,128643,128685,128714,128715,128651,128662,128668,128674,128675,128682,128676,128713,128681,128736,128708,128711,128705,
 128706,128712,128707,128710,128709,128677,128678,128683,128679,128680,128684,128641,128697,129165,129168,128701,128702,128698,128699,129171,129170,128700,129169,128722,128521,128730,129270,129271,129283,129272,
 128786,128794,128776,128763,128784) OR master_guid IN (129549,129561,129552,129551,129524,129513,129559,129523,129527,129515,129537,129536,129560,129514,129542,129508,129539,129510,129538,129534,129528,129535,
 129525,129512,129509,129505,129506,129504,129500,129501,129543,129540,129526,129541,129511,129554,128554,128556,128555,129502,129503,129507,129557,128517,128518,128519,128520,129461,129462,129463,129280,128498,
 128499,128703,128638,128634,128635,128633,128637,128628,128627,128636,128716,128727,128632,128631,128630,128724,128717,128721,128669,128719,128718,128720,128686,128629,128639,129255,129259,129263,129293,129295,
 129305,129294,129298,129310,129214,129236,129215,129251,129235,129246,129249,129248,129247,129245,129152,129151,128908,128883,128906,128881,128907,128882,128903,128878,128892,128867,128886,128861,128862,128887,
 128871,128884,128896,128909,128890,128865,128877,128902,128888,128863,128872,128897,128891,128866,128900,128875,128640,128704,128642,128723,128726,128729,128732,128725,128728,128731,128673,128672,128665,128671,
 128670,128666,128664,128663,128667,128650,128649,128647,128646,128733,128648,128645,128644,128734,128643,128685,128714,128715,128651,128662,128668,128674,128675,128682,128676,128713,128681,128736,128708,128711,
 128705,128706,128712,128707,128710,128709,128677,128678,128683,128679,128680,128684,128641,128697,129165,129168,128701,128702,128698,128699,129171,129170,128700,129169,128722,128521,128730,129272);
 
 -- CREATURES UPDATES --
 -- Scourge Gryphon -- correct inhabitType
  UPDATE creature_template SET InhabitType = 5 WHERE entry IN (29488,29501);
 -- Sky Darkener Target -- correct inhabitType
 UPDATE creature_template SET InhabitType = 5 WHERE entry = 28655;
 -- Scarlet Gryphon -- correct speed
 UPDATE creature_template SET SpeedRun = 3.142857 WHERE entry = 28614;
 -- Squire Edwards
 UPDATE creature SET spawndist = 0, MovementType = 0 WHERE guid = 128514;
 -- Acherus Geist
 UPDATE creature_template SET SpeedWalk = 1.6, SpeedRun = 1.42857 WHERE entry = 28709;
 UPDATE creature SET position_x = 2374.8103, position_y = -5768.86914, position_z = 151.36789, orientation = 1.0397, spawndist = 10, MovementType = 1 WHERE guid = 128493;
 UPDATE creature SET position_x = 2308.156738, position_y = -5692.175293, position_z = 154.035553, orientation = 5.493559, spawndist = 10, MovementType = 1 WHERE guid = 128492;
 UPDATE creature SET position_x = 2294.674805, position_y = -5664.577148, position_z = 149.566483, orientation = 5.033237, spawndist = 10, MovementType = 1 WHERE guid = 128491;
 UPDATE creature SET position_x = 2353.526855, position_y = -5650.782715, position_z = 155.107605, orientation = 5.975759, spawndist = 10, MovementType = 1 WHERE guid = 128490;
 UPDATE creature SET position_x = 2388.947510, position_y = -5671.491211, position_z = 153.925858, orientation = 5.407634, spawndist = 15, MovementType = 1 WHERE guid = 128485;
 UPDATE creature SET position_x = 2407.680664, position_y = -5656.884766, position_z = 156.329193, orientation = 6.108020, spawndist = 10, MovementType = 1 WHERE guid = 128489;
 UPDATE creature SET position_x = 2396.615234, position_y = -5642.852051, position_z = 156.710114, orientation = 1.415266, spawndist = 10, MovementType = 1 WHERE guid = 128488;
 UPDATE creature SET position_x = 2274.42, position_y = -5646.18, position_z = 142.258, orientation = 3.61903, spawndist = 0, MovementType = 2 WHERE guid = 128494;
 UPDATE creature SET position_x = 2259.67, position_y = -5641.18, position_z = 138.909, orientation = 3.15041, spawndist = 0, MovementType = 2 WHERE guid = 128495;
 UPDATE creature SET position_x = 2317.49, position_y = -5661.7, position_z = 153.201, orientation = 2.40253, spawndist = 0, MovementType = 2 WHERE guid = 128486;
 UPDATE creature SET position_x = 2420.91, position_y = -5783.06, position_z = 144.912, orientation = 5.05147, spawndist = 0, MovementType = 2 WHERE guid = 128497;
 UPDATE creature SET position_x = 2428.08, position_y = -5781.23, position_z = 143.936, orientation = 4.95301, spawndist = 0, MovementType = 2 WHERE guid = 128496;
 UPDATE creature SET position_x = 2345.153809, position_y = -5720.771484, position_z = 153.922424, orientation = 0.743744, spawndist = 0, MovementType = 0 WHERE guid = 128578;
 -- Orithos the Sky Darkener
 UPDATE creature SET MovementType = 2, spawndist = 0 WHERE guid = 129437;
 DELETE FROM creature_movement WHERE id = 129437;
 UPDATE creature_template SET MovementType = 2 WHERE entry = 28647;
 DELETE FROM creature_movement_template WHERE entry = 28647;
 INSERT INTO creature_movement_template (entry,point,position_x,position_y,position_z,waittime,script_id,textid1,textid2,textid3,textid4,textid5,emote,spell,wpguid,orientation,model1,model2) VALUES
 (28647,1,2283.3,-5699.41,153.962,0,0,0,0,0,0,0,0,0,0,5.48523,0,0),
 (28647,2,2322.22,-5748.33,153.962,0,0,0,0,0,0,0,0,0,0,2.32793,0,0);
 -- Stable Master Kitrik
 UPDATE creature SET MovementType = 2, spawndist = 0 WHERE guid = 128455;
 DELETE FROM creature_movement WHERE id = 128455;
 UPDATE creature_template SET MovementType = 2 WHERE entry = 28683;
 DELETE FROM creature_movement_template WHERE entry = 28683;
 INSERT INTO creature_movement_template (entry,point,position_x,position_y,position_z,waittime,script_id,textid1,textid2,textid3,textid4,textid5,emote,spell,wpguid,orientation,model1,model2) VALUES
 (28683,1,2182.12,-5810.93,101.349,0,0,0,0,0,0,0,0,0,0,3.84069,0,0),(28683,2,2176.7,-5817.58,101.346,0,0,0,0,0,0,0,0,0,0,4.69756,0,0),(28683,3,2177.05,-5823.81,101.348,0,0,0,0,0,0,0,0,0,0,5.31645,0,0),
 (28683,4,2189.37,-5833.94,101.44,0,0,0,0,0,0,0,0,0,0,5.24341,0,0),(28683,5,2190.73,-5840.08,101.358,0,0,0,0,0,0,0,0,0,0,4.68022,0,0),(28683,6,2186.88,-5854.52,101.346,0,0,0,0,0,0,0,0,0,0,4.68101,0,0),
 (28683,7,2189.61,-5860.73,101.322,0,0,0,0,0,0,0,0,0,0,5.66275,0,0),(28683,8,2197.14,-5864.42,101.299,0,0,0,0,0,0,0,0,0,0,6.11828,0,0),(28683,9,2206.99,-5866.2,101.335,0,0,0,0,0,0,0,0,0,0,0.0408708,0,0),
 (28683,10,2223.99,-5864.09,101.328,0,0,0,0,0,0,0,0,0,0,0.46734,0,0),(28683,11,2236.62,-5857.59,101.255,0,0,0,0,0,0,0,0,0,0,0.651909,0,0),(28683,12,2245.63,-5845.25,101.234,0,0,0,0,0,0,0,0,0,0,1.18205,0,0),
 (28683,13,2248.07,-5836.98,101.301,0,0,0,0,0,0,0,0,0,0,1.57082,0,0),(28683,14,2246.83,-5830.88,101.26,0,0,0,0,0,0,0,0,0,0,2.32481,0,0),(28683,15,2244.14,-5827.74,101.249,0,0,0,0,0,0,0,0,0,0,2.46757,0,0),
 (28683,16,2239.05,-5825.29,101.284,0,0,0,0,0,0,0,0,0,0,3.06762,0,0),(28683,17,2227.86,-5823.52,101.561,0,0,0,0,0,0,0,0,0,0,2.79273,0,0),(28683,18,2219.38,-5817.44,101.621,0,0,0,0,0,0,0,0,0,0,2.29793,0,0),
 (28683,19,2209.04,-5804.73,101.352,0,0,0,0,0,0,0,0,0,0,2.70398,0,0),(28683,20,2204.03,-5803.17,101.348,0,0,0,0,0,0,0,0,0,0,3.16029,0,0);
 -- Scarlet Farm Hound
 UPDATE creature SET position_x = 1993.386230, position_y = -5786.060547, position_z = 100.834045, orientation = 4.610285, spawndist = 10, MovementType = 1 WHERE guid = 128584;
 UPDATE creature SET position_x = 2032.527954, position_y = -5819.889648, position_z = 100.997482, orientation = 3.675666, spawndist = 10, MovementType = 1 WHERE guid = 128586;
 UPDATE creature SET position_x = 1992.902222, position_y = -5866.563477, position_z = 100.788521, orientation = 4.040874, spawndist = 10, MovementType = 1 WHERE guid = 128583;
 UPDATE creature SET position_x = 1951.767578, position_y = -5825.396484, position_z = 100.842171, orientation = 3.227984, spawndist = 10, MovementType = 1 WHERE guid = 128587;
 UPDATE creature SET spawndist = 10, MovementType = 1 WHERE guid = 128589;
 -- Scarlet Medic
 UPDATE creature SET position_x = 2237.312012, position_y = -5886.088867, position_z = 100.644066, orientation = 0.836474 WHERE guid = 129254;
 UPDATE creature SET position_x = 2154.661133, position_y = -5818.730469, position_z = 101.946465, orientation = 5.117906 WHERE guid = 129253;
 UPDATE creature SET position_x = 2172.88, position_y = -5729.58, position_z = 101.757, orientation = 1.30883 WHERE guid = 129257;
 -- Scarlet Peasant
 UPDATE creature SET orientation = 5.90615 WHERE guid = 128758;
 -- Scarlet Captain
 UPDATE creature SET position_x = 2148.104004, position_y = -5759.353027, position_z = 99.886795, orientation = 1.740773 WHERE guid = 129299;
 -- Havenshire Stallion - spawntime req. for his event
 UPDATE creature SET spawntimesecs = 20 WHERE guid = 129217;
 -- Scarlet Fleet Defender - q. req.
 UPDATE creature SET spawntimesecs = 30 WHERE id = 28834;
 -- Scarlet Infantryman - all should have same aura addon (we can use template and remove from creature_addon)
 DELETE FROM creature_addon WHERE guid IN (129264,129265,129266,129267,129268,129269,129270,129271,129272,129273,129274,129275,129276,129277,129278,129279,129281,129282,129283,129284,129285,129286,129287,
 129288,129289,129290,129291);
 DELETE FROM creature_template_addon WHERE entry = 28609;
 INSERT INTO creature_template_addon VALUES (28609,0,0,1,0,333,0,48356);
 DELETE FROM creature_addon WHERE guid IN (129282,129284);
 INSERT INTO creature_addon VALUES (129282,0,0,1,0,0,0,'48356 52103'),(129284,0,0,1,0,0,0,'48356 52103'); -- these 2 has special aura
 UPDATE creature SET position_x = 2417.918945, position_y = -5859.758789, position_z = 105.522697, orientation = 0.9 WHERE guid = 129286;
 UPDATE creature SET position_x = 2435.682373, position_y = -5867.880859, position_z = 106.577202, orientation = 1.6 WHERE guid = 129287;
 UPDATE creature SET position_x = 2144.156006, position_y = -5674.584961, position_z = 110.115265, orientation = 0.2 WHERE guid = 129291;
 UPDATE creature SET position_x = 2208.773682, position_y = -5719.310059, position_z = 101.472847, orientation = 6.15 WHERE guid = 129282;
 -- Scarlet Peasant
 UPDATE creature SET position_x = 2134.455811, position_y = -5743.186035, position_z = 99.443970, orientation = 2.490976 WHERE guid = 128792;
 UPDATE creature SET position_x = 2085.78, position_y = -5754.1, position_z = 99.3376, orientation = 6.07106 WHERE guid = 128766;
 UPDATE creature SET spawndist = 0, MovementType = 0 WHERE guid IN (128755,128761);
 DELETE FROM creature_addon WHERE guid IN (128766,128782,128772,128774,128791,128792,128795);
 INSERT INTO creature_addon VALUES (128766,0,0,1,0,234,0,48356),(128782,0,0,1,0,234,0,48356),(128772,0,0,1,0,234,0,48356),(128774,0,0,1,0,234,0,48356),(128791,0,0,1,0,234,0,48356),(128792,0,0,1,0,234,0,48356),(128795,0,0,1,0,234,0,48356);
 
 -- WAYPOINTS --  for phase 1
 UPDATE creature SET MovementType = 2, spawndist = 0 WHERE guid IN (128582,129460,128486,128484,128494,128495,128497,128496,129261,129254,129253,129256,129262,129292,129301,129300,129302,129296,129297,129299,129303,
 129308,129309,128739,129212,129217,129024,129051,129146,129020,129153,129282,129284);
 DELETE FROM creature_movement WHERE id IN (128582,129460,128486,128484,128494,128495,128497,128496,129261,129254,129253,129256,129262,129292,129301,129300,129302,129296,129297,129299,129303,129308,129309,128739,
 129212,129217,129024,129051,129146,129020,129153,129282,129284);
 INSERT INTO creature_movement (id, point, position_x, position_y, position_z, waittime, script_id, textid1, textid2, textid3, textid4, textid5, emote, spell, wpguid, orientation, model1, model2) VALUES
 (128582,1,2355.03,-5650.57,382.306,0,0,0,0,0,0,0,0,0,0,5.60655,0,0),(128582,2,2364.95,-5662.84,382.266,0,0,0,0,0,0,0,0,0,0,5.32226,0,0),(128582,3,2368.88,-5671.55,382.243,0,0,0,0,0,0,0,0,0,0,4.84552,0,0),
 (128582,4,2368.09,-5677.81,382.229,0,0,0,0,0,0,0,0,0,0,4.45439,0,0),(128582,5,2366.49,-5680.22,382.23,0,0,0,0,0,0,0,0,0,0,3.97294,0,0),(128582,6,2358.36,-5684.71,382.239,0,0,0,0,0,0,0,0,0,0,3.50013,0,0),
 (128582,7,2354.14,-5684.11,382.239,0,0,0,0,0,0,0,0,0,0,2.88909,0,0),(128582,8,2351.7,-5680.64,382.239,0,0,0,0,0,0,0,0,0,0,1.80132,0,0),(128582,9,2352.91,-5677.18,382.239,0,0,0,0,0,0,0,0,0,0,1.48106,0,0),
 (128582,10,2353.32,-5675.03,382.24,0,0,0,0,0,0,0,0,0,0,1.64914,0,0),(128582,11,2352.16,-5670.21,382.242,0,0,0,0,0,0,0,0,0,0,1.96854,0,0),(128582,12,2350.49,-5666.54,382.242,0,0,0,0,0,0,0,0,0,0,2.31944,0,0),
 (128582,13,2346.84,-5663.05,382.243,0,0,0,0,0,0,0,0,0,0,2.8221,0,0),(128582,14,2338.82,-5660.43,382.24,0,0,0,0,0,0,0,0,0,0,2.49223,0,0),(128582,15,2338.06,-5655.55,382.24,0,0,0,0,0,0,0,0,0,0,1.02196,0,0),
 (128582,16,2343.97,-5651.11,382.282,0,0,0,0,0,0,0,0,0,0,0.612259,0,0),(129460,1,2381.17,-5731.63,153.922,0,0,0,0,0,0,0,0,0,0,2.28931,0,0),(129460,2,2335.24,-5682.83,153.922,0,0,0,0,0,0,0,0,0,0,5.39556,0,0),
 (128486,1,2317.49,-5661.7,153.201,2000,2870901,0,0,0,0,0,0,0,0,2.40253,0,0),(128486,2,2339.6,-5683.8,153.922,0,0,0,0,0,0,0,0,0,0,5.5874,0,0),(128486,3,2355.11,-5702.48,153.92,0,0,0,0,0,0,0,0,0,0,5.47194,0,0),
 (128486,4,2385.46,-5730.73,153.922,0,0,0,0,0,0,0,0,0,0,5.43574,0,0),(128486,5,2407.29,-5754.73,153.907,2000,0,0,0,0,0,0,0,0,0,5.50643,0,0),(128486,6,2363.77,-5709.2,153.923,0,0,0,0,0,0,0,0,0,0,2.27844,0,0),
 (128486,7,2317.49,-5661.7,153.201,2000,0,0,0,0,0,0,0,0,0,2.4,0,0),(128484,1,2322.74,-5624.89,152.099,1000,2870901,0,0,0,0,0,0,0,0,0.2,0,0),(128484,2,2312.95,-5645.39,149.817,0,0,0,0,0,0,0,0,0,0,0.21,0,0),
 (128494,1,2274.42,-5646.18,142.258,1000,2870901,0,0,0,0,0,0,0,0,3.62,0,0),(128494,2,2263.38,-5651.55,138.595,0,0,0,0,0,0,0,0,0,0,3.37974,0,0),(128494,3,2220.51,-5658.85,125.151,0,0,0,0,0,0,0,0,0,0,3.72,0,0),
 (128494,4,2206.73,-5668.97,118.319,0,0,0,0,0,0,0,0,0,0,3.72453,0,0),(128494,5,2184.66,-5685.67,110.593,0,0,0,0,0,0,0,0,0,0,1.62937,0,0),(128494,6,2183.91,-5677.17,112.45,0,0,0,0,0,0,0,0,0,0,1.07671,0,0),
 (128494,7,2202.52,-5652.79,121.832,0,0,0,0,0,0,0,0,0,0,0.505729,0,0),(128494,8,2234.02,-5638.04,133.237,0,0,0,0,0,0,0,0,0,0,0.255441,0,0),(128494,9,2262.76,-5630.8,142.946,0,0,0,0,0,0,0,0,0,0,5.64327,0,0),
 (128494,10,2279.18,-5643.24,143.819,0,0,0,0,0,0,0,0,0,0,3.68213,0,0),(128495,1,2259.67,-5641.18,138.909,1000,2870901,0,0,0,0,0,0,0,0,3.15,0,0),(128495,2,2220.92,-5644.93,127.963,0,0,0,0,0,0,0,0,0,0,3.7,0,0),
 (128495,3,2180.75,-5671.91,113.432,0,0,0,0,0,0,0,0,0,0,5.07701,0,0),(128495,4,2186.25,-5687.66,110.304,0,0,0,0,0,0,0,0,0,0,0.591784,0,0),(128495,5,2198.87,-5677.85,113.546,0,0,0,0,0,0,0,0,0,0,0.827452,0,0),
 (128495,6,2211.37,-5665.1,120.953,0,0,0,0,0,0,0,0,0,0,0.4346,0,0),(128495,7,2215.85,-5662.83,122.909,0,0,0,0,0,0,0,0,0,0,0.113371,0,0),(128495,8,2230.85,-5660.58,127.762,0,0,0,0,0,0,0,0,0,0,0.217311,0,0),
 (128495,9,2268.12,-5652.45,140.123,0,0,0,0,0,0,0,0,0,0,2.3,0,0),(128497,1,2420.91,-5783.06,144.912,1000,2870901,0,0,0,0,0,0,0,0,5.05147,0,0),(128497,2,2424.91,-5795.56,136.284,0,0,0,0,0,0,0,0,0,0,5.0,0,0),
 (128497,3,2430.05,-5813.4,123.698,0,0,0,0,0,0,0,0,0,0,4.76715,0,0),(128497,4,2431.55,-5839.9,112.193,0,0,0,0,0,0,0,0,0,0,5.14022,0,0),(128497,5,2435.88,-5848.18,110.821,0,0,0,0,0,0,0,0,0,0,1.28234,0,0),
 (128497,6,2439.07,-5830.71,117.19,0,0,0,0,0,0,0,0,0,0,1.7575,0,0),(128497,7,2437.07,-5817.21,121.852,0,0,0,0,0,0,0,0,0,0,1.7575,0,0),(128497,8,2433.13,-5798.02,133.529,0,0,0,0,0,0,0,0,0,0,1.72991,0,0),
 (128497,9,2428.88,-5780.52,144.159,0,0,0,0,0,0,0,0,0,0,3.64,0,0),(128496,1,2428.08,-5781.23,143.936,1000,2870901,0,0,0,0,0,0,0,0,4.95,0,0),(128496,2,2431.83,-5801.73,131.007,0,0,0,0,0,0,0,0,0,0,4.9,0,0),
 (128496,3,2434.52,-5815.74,122.281,0,0,0,0,0,0,0,0,0,0,4.70491,0,0),(128496,4,2435.68,-5850.09,110.343,0,0,0,0,0,0,0,0,0,0,2.27017,0,0),(128496,5,2426.39,-5839.45,112.787,0,0,0,0,0,0,0,0,0,0,1.48386,0,0),
 (128496,6,2426.89,-5832.45,115.05,0,0,0,0,0,0,0,0,0,0,1.48386,0,0),(128496,7,2428.61,-5806.57,127.862,0,0,0,0,0,0,0,0,0,0,1.87184,0,0),(128496,8,2424.36,-5792.57,138.63,0,0,0,0,0,0,0,0,0,0,1.87184,0,0),
 (128496,9,2420.36,-5779.07,146.508,0,0,0,0,0,0,0,0,0,0,6.21274,0,0),(128496,10,2426.77,-5779.23,145.036,0,0,0,0,0,0,0,0,0,0,5.28497,0,0),(129261,1,2234.92,-5793.99,101.102,0,0,0,0,0,0,0,0,0,0,5.56788,0,0),
 (129261,2,2261.4,-5818.23,100.942,0,0,0,0,0,0,0,0,0,0,5.5616,0,0),(129261,3,2234.54,-5793.41,101.12,0,0,0,0,0,0,0,0,0,0,2.9101,0,0),(129261,4,2214.49,-5784.49,101.671,0,0,0,0,0,0,0,0,0,0,2.69097,0,0),
 (129254,1,2256.55,-5872.22,101.04,0,0,0,0,0,0,0,0,0,0,1.22227,0,0),(129254,2,2264.65,-5849.63,100.963,0,0,0,0,0,0,0,0,0,0,1.21834,0,0),(129254,3,2256.31,-5872.61,101.024,0,0,0,0,0,0,0,0,0,0,3.78423,0,0),
 (129254,4,2237.18,-5886.35,100.642,0,0,0,0,0,0,0,0,0,0,3.75135,0,0),(129253,1,2166.3,-5854.62,102.069,0,0,0,0,0,0,0,0,0,0,4.94512,0,0),(129253,2,2154.54,-5818.22,101.968,0,0,0,0,0,0,0,0,0,0,1.61267,0,0),
 (129253,3,2156.74,-5803.89,101.03,0,0,0,0,0,0,0,0,0,0,0.73931,0,0),(129253,4,2180.79,-5786.99,101.244,0,0,0,0,0,0,0,0,0,0,0.623071,0,0),(129253,5,2156.5,-5804.16,101.029,0,0,0,0,0,0,0,0,0,0,3.88247,0,0),
 (129253,6,2154.54,-5818.87,101.94,0,0,0,0,0,0,0,0,0,0,4.83359,0,0),(129256,1,2178.25,-5768.01,101.347,0,0,0,0,0,0,0,0,0,0,4.77781,0,0),(129256,2,2177.1,-5777.93,101.486,0,0,0,0,0,0,0,0,0,0,3.92173,0,0),
 (129256,3,2144.9,-5798.32,100.248,0,0,0,0,0,0,0,0,0,0,2.88579,0,0),(129256,4,2135.81,-5792.78,99.4591,0,0,0,0,0,0,0,0,0,0,2.07133,0,0),(129256,5,2133.99,-5784.35,99.0072,0,0,0,0,0,0,0,0,0,0,1.32677,0,0),
 (129256,6,2142.39,-5776.05,99.476,0,0,0,0,0,0,0,0,0,0,0.450266,0,0),(129256,7,2171.29,-5760.64,101.007,0,0,0,0,0,0,0,0,0,0,0.465974,0,0),(129262,1,2380.18,-5895.07,106.803,0,0,0,0,0,0,0,0,0,0,5.15648,0,0),
 (129262,2,2386.34,-5904.35,108.859,0,0,0,0,0,0,0,0,0,0,5.41409,0,0),(129262,3,2394.96,-5911.07,110.217,0,0,0,0,0,0,0,0,0,0,5.29863,0,0),(129262,4,2388.04,-5925.44,110.273,0,0,0,0,0,0,0,0,0,0,3.50479,0,0),
 (129262,5,2377.38,-5916.79,109.682,0,0,0,0,0,0,0,0,0,0,1.98976,0,0),(129262,6,2364.79,-5873.76,104.568,0,0,0,0,0,0,0,0,0,0,1.62455,0,0),(129262,7,2369.69,-5862.65,104.526,0,0,0,0,0,0,0,0,0,0,0.807665,0,0),
 (129262,8,2404.63,-5858.52,105.559,0,0,0,0,0,0,0,0,0,0,6.04313,0,0),(129262,9,2408.87,-5866.88,104.606,0,0,0,0,0,0,0,0,0,0,4.1566,0,0),(129262,10,2385.9,-5867.91,104.71,0,0,0,0,0,0,0,0,0,0,3.39389,0,0),
 (129262,11,2378.67,-5870.52,104.682,0,0,0,0,0,0,0,0,0,0,3.76067,0,0),(129262,12,2373.55,-5878.07,104.849,0,0,0,0,0,0,0,0,0,0,4.75498,0,0),(129301,1,2303.02,-5853.49,100.935,0,0,0,0,0,0,0,0,0,0,1.16618,0,0),
 (129301,2,2306.9,-5831.2,101.009,0,0,0,0,0,0,0,0,0,0,2.04662,0,0),(129301,3,2302.2,-5823.47,101.038,0,0,0,0,0,0,0,0,0,0,2.40868,0,0),(129301,4,2287.62,-5813.63,101.017,0,0,0,0,0,0,0,0,0,0,2.92705,0,0),
 (129301,5,2271.13,-5813.72,100.935,0,0,0,0,0,0,0,0,0,0,3.49568,0,0),(129301,6,2259.04,-5824.1,100.974,0,0,0,0,0,0,0,0,0,0,4.35569,0,0),(129301,7,2258.25,-5833,101.097,0,0,0,0,0,0,0,0,0,0,4.62821,0,0),
 (129301,8,2262.88,-5846.46,100.951,0,0,0,0,0,0,0,0,0,0,5.76075,0,0),(129301,9,2275.32,-5851.56,100.981,0,0,0,0,0,0,0,0,0,0,5.97164,0,0),(129301,10,2286.22,-5860.48,100.931,0,0,0,0,0,0,0,0,0,0,6.12322,0,0),
 (129301,11,2298.18,-5858.98,100.933,0,0,0,0,0,0,0,0,0,0,0.646633,0,0),(129300,1,2113.16,-5749.31,99.2333,0,0,0,0,0,0,0,0,0,0,4.73853,0,0),(129300,2,2111.5,-5770.31,98.2899,0,0,0,0,0,0,0,0,0,0,3.95313,0,0),
 (129300,3,2088.44,-5771.71,99.1721,0,0,0,0,0,0,0,0,0,0,2.8308,0,0),(129300,4,2071.38,-5756.36,99.4094,0,0,0,0,0,0,0,0,0,0,2.24489,0,0),(129300,5,2068.61,-5742.29,99.0467,0,0,0,0,0,0,0,0,0,0,1.26236,0,0),
 (129300,6,2079.67,-5726.65,101.454,0,0,0,0,0,0,0,0,0,0,0.133316,0,0),(129300,7,2102.98,-5729.67,100.349,0,0,0,0,0,0,0,0,0,0,6.03087,0,0),(129292,1,2160.27,-5913.36,100.123,0,0,0,0,0,0,0,0,0,0,5.22575,0,0),
 (129292,2,2167.27,-5920.19,100.529,0,0,0,0,0,0,0,0,0,0,5.7229,0,0),(129292,3,2177.36,-5924.51,101.121,0,0,0,0,0,0,0,0,0,0,0.277724,0,0),(129292,4,2184.75,-5920.58,101.076,0,0,0,0,0,0,0,0,0,0,0.669638,0,0),
 (129292,5,2191.01,-5913.55,100.921,0,0,0,0,0,0,0,0,0,0,1.44247,0,0),(129292,6,2188.31,-5899.29,100.865,0,0,0,0,0,0,0,0,0,0,2.7423,0,0),(129292,7,2173.39,-5894.44,101.258,0,0,0,0,0,0,0,0,0,0,3.25046,0,0),
 (129292,8,2139.54,-5899.23,102.465,0,0,0,0,0,0,0,0,0,0,2.61631,0,0),(129292,9,2129.08,-5863.27,101.756,0,0,0,0,0,0,0,0,0,0,0.951732,0,0),(129292,10,2132.16,-5858.39,101.598,0,0,0,0,0,0,0,0,0,0,0.818211,0,0),
 (129292,11,2141.93,-5854.46,101.351,0,0,0,0,0,0,0,0,0,0,6.03326,0,0),(129292,12,2153.17,-5859.31,101.35,0,0,0,0,0,0,0,0,0,0,5.56437,0,0),(129292,13,2162.02,-5870.12,101.311,0,0,0,0,0,0,0,0,0,0,4.9502,0,0),
 (129292,14,2162.05,-5877.97,101.333,0,0,0,0,0,0,0,0,0,0,4.51823,0,0),(129292,15,2158.04,-5887.76,101.27,0,0,0,0,0,0,0,0,0,0,4.42058,0,0),(129302,1,2142.69,-5854.15,101.352,0,0,0,0,0,0,0,0,0,0,5.64134,0,0),
 (129302,2,2160.03,-5863.74,101.343,0,0,0,0,0,0,0,0,0,0,5.96987,0,0),(129302,3,2163.18,-5866.82,101.325,15000,2861101,0,0,0,0,0,0,0,0,5.95,0,0),(129302,4,2181.06,-5870.53,101.288,0,0,0,0,0,0,0,0,0,0,6.1,0,0),
 (129302,5,2162.67,-5866.22,101.328,0,0,0,0,0,0,0,0,0,0,2.74714,0,0),(129302,6,2142.94,-5853.58,101.349,0,0,0,0,0,0,0,0,0,0,2.0285,0,0),(129302,7,2142.59,-5841.03,101.318,0,0,0,0,0,0,0,0,0,0,1.42374,0,0),
 (129302,8,2142.77,-5819.21,100.895,0,0,0,0,0,0,0,0,0,0,1.86334,0,0),(129302,9,2128.82,-5790.25,98.8795,0,0,0,0,0,0,0,0,0,0,1.38032,0,0),(129302,10,2128.17,-5794.43,99.0854,0,0,0,0,0,0,0,0,0,0,4.67271,0,0),
 (129302,11,2130.96,-5801.12,99.619,0,0,0,0,0,0,0,0,0,0,5.31045,0,0),(129302,12,2143.34,-5819.31,100.926,0,0,0,0,0,0,0,0,0,0,5.01514,0,0),(129297,1,2319.66,-5848.97,100.935,0,0,0,0,0,0,0,0,0,0,2.78011,0,0),
 (129297,2,2358.53,-5857.29,103.499,0,0,0,0,0,0,0,0,0,0,0.0374998,0,0),(129297,3,2372.83,-5857.43,104.873,0,0,0,0,0,0,0,0,0,0,0.252697,0,0),(129297,4,2392.42,-5849.89,107.346,0,0,0,0,0,0,0,0,0,0,0.384643,0,0),
 (129297,5,2366.13,-5858.16,104.3,0,0,0,0,0,0,0,0,0,0,2.90813,0,0),(129297,6,2337.91,-5851.9,100.935,0,0,0,0,0,0,0,0,0,0,2.90577,0,0),(129303,1,2390.07,-5931.47,110.55,0,0,0,0,0,0,0,0,0,0,0.386819,0,0),
 (129303,2,2398.67,-5927.69,110.708,0,0,0,0,0,0,0,0,0,0,0.979795,0,0),(129303,3,2398.53,-5919.04,110.312,0,0,0,0,0,0,0,0,0,0,1.93405,0,0),(129303,4,2394.77,-5912.12,110.234,0,0,0,0,0,0,0,0,0,0,2.50033,0,0),
 (129303,5,2388.95,-5907.49,109.52,0,0,0,0,0,0,0,0,0,0,2.89381,0,0),(129303,6,2373.15,-5905.92,107.84,0,0,0,0,0,0,0,0,0,0,2.45792,0,0),(129303,7,2358.65,-5881.45,104.836,0,0,0,0,0,0,0,0,0,0,2.31497,0,0),
 (129303,8,2351.68,-5878.2,104.568,0,0,0,0,0,0,0,0,0,0,3.10901,0,0),(129303,9,2337.91,-5878.7,102.648,0,0,0,0,0,0,0,0,0,0,3.33206,0,0),(129303,10,2317.48,-5881.55,100.626,0,0,0,0,0,0,0,0,0,0,3.10665,0,0),
 (129303,11,2286.17,-5880.3,100.304,0,0,0,0,0,0,0,0,0,0,3.24174,0,0),(129303,12,2272.73,-5882.74,100.89,0,0,0,0,0,0,0,0,0,0,4.07976,0,0),(129303,13,2253.52,-5911.46,99.5266,0,0,0,0,0,0,0,0,0,0,4.53765,0,0),
 (129303,14,2274.04,-5882.75,100.739,0,0,0,0,0,0,0,0,0,0,0.261942,0,0),(129303,15,2287.78,-5880.13,100.248,0,0,0,0,0,0,0,0,0,0,6.26126,0,0),(129303,16,2318.09,-5881.68,100.652,0,0,0,0,0,0,0,0,0,0,0.0990315,0,0),
 (129303,17,2343.77,-5878.09,103.791,0,0,0,0,0,0,0,0,0,0,0.0652592,0,0),(129303,18,2353.55,-5878.97,104.659,0,0,0,0,0,0,0,0,0,0,5.83632,0,0),(129303,19,2359.3,-5881.44,104.844,0,0,0,0,0,0,0,0,0,0,5.49153,0,0),
 (129303,20,2370.81,-5898.05,106.909,0,0,0,0,0,0,0,0,0,0,5.16795,0,0),(129303,21,2379.07,-5918.67,110.059,0,0,0,0,0,0,0,0,0,0,5.3156,0,0),(129299,1,2144.25,-5736.86,100.243,0,0,0,0,0,0,0,0,0,0,2.01409,0,0),
 (129299,2,2137.89,-5727.64,100.314,0,0,0,0,0,0,0,0,0,0,2.35,0,0),(129299,3,2128.15,-5716.13,100.621,0,0,0,0,0,0,0,0,0,0,2.2,0,0),(129299,4,2138.36,-5728.58,100.285,15000,2861102,0,0,0,0,0,0,0,0,5.34968,0,0),
 (129299,5,2144.69,-5738.47,100.186,0,0,0,0,0,0,0,0,0,0,4.96091,0,0),(129299,6,2147.98,-5759.81,99.8653,0,0,0,0,0,0,0,0,0,0,4.61769,0,0),(129299,7,2145.06,-5766.31,99.5844,0,0,0,0,0,0,0,0,0,0,4.25013,0,0),
 (129299,8,2148.29,-5759.08,99.9146,0,0,0,0,0,0,0,0,0,0,1.63554,0,0),(129296,1,2184.73,-5752.8,101.735,0,0,0,0,0,0,0,0,0,0,0.64593,0,0),(129296,2,2203.79,-5747.64,102.482,0,0,0,0,0,0,0,0,0,0,6.05261,0,0),
 (129296,3,2227.56,-5757.37,101.943,0,0,0,0,0,0,0,0,0,0,5.257,0,0),(129296,4,2222.95,-5772.72,101.685,0,0,0,0,0,0,0,0,0,0,4.19201,0,0),(129296,5,2198.06,-5777.75,101.381,0,0,0,0,0,0,0,0,0,0,2.43979,0,0),
 (129296,6,2183.36,-5766.52,101.407,0,0,0,0,0,0,0,0,0,0,2.36359,0,0),(129308,1,2290.84,-5885.52,135.39,1000,2861401,0,0,0,0,0,0,0,0,1.31535,0,0),(129308,2,2294.92,-5853.35,136.543,0,0,0,0,0,0,0,0,0,0,1.66509,0,0),
 (129308,3,2293.64,-5844,137.115,0,0,0,0,0,0,0,0,0,0,1.85359,0,0),(129308,4,2287.25,-5825.72,138.646,0,0,0,0,0,0,0,0,0,0,2.01067,0,0),(129308,5,2273.05,-5800.65,141.145,0,0,0,0,0,0,0,0,0,0,2.12848,0,0),
 (129308,6,2246.05,-5756.18,146.144,0,0,0,0,0,0,0,0,0,0,2.15988,0,0),(129308,7,2229.17,-5732.17,144.006,0,0,0,0,0,0,0,0,0,0,2.46618,0,0),(129308,8,2202.98,-5712.59,143.603,0,0,0,0,0,0,0,0,0,0,2.85574,0,0),
 (129308,9,2168.06,-5704.96,144.854,0,0,0,0,0,0,0,0,0,0,3.27592,0,0),(129308,10,2109.08,-5721.04,143.582,0,0,0,0,0,0,0,0,0,0,4.08881,0,0),(129308,11,2082.58,-5789.19,143.082,0,0,0,0,0,0,0,0,0,0,4.57182,0,0),
 (129308,12,2080.64,-5826.85,145.298,0,0,0,0,0,0,0,0,0,0,4.88597,0,0),(129308,13,2084.41,-5845.73,144.543,0,0,0,0,0,0,0,0,0,0,5.32186,0,0),(129308,14,2107.78,-5873.44,143.243,0,0,0,0,0,0,0,0,0,0,5.46323,0,0),
 (129308,15,2123.06,-5888.45,142.906,0,0,0,0,0,0,0,0,0,0,5.61638,0,0),(129308,16,2151.65,-5912.94,142.206,0,0,0,0,0,0,0,0,0,0,5.83236,0,0),(129308,17,2205.41,-5939.5,139.168,0,0,0,0,0,0,0,0,0,0,6.15829,0,0),
 (129308,18,2248.21,-5944.19,135.833,0,0,0,0,0,0,0,0,0,0,0.346343,0,0),(129308,19,2269.4,-5933.04,136.137,0,0,0,0,0,0,0,0,0,0,1.01393,0,0),(129308,20,2282.93,-5912.56,135.776,0,0,0,0,0,0,0,0,0,0,1.18279,0,0),
 (129308,21,2290.86,-5885.27,137.08,0,0,0,0,0,0,0,0,0,0,1.28097,0,0),(129309,1,2183.99,-5699.37,138.447,1000,2861401,0,0,0,0,0,0,0,0,5.92124,0,0),(129309,2,2210.61,-5712.16,142.897,0,0,0,0,0,0,0,0,0,0,5.71713,0,0),
 (129309,3,2226.23,-5722.17,145.544,0,0,0,0,0,0,0,0,0,0,5.5522,0,0),(129309,4,2254.1,-5748.04,150.613,0,0,0,0,0,0,0,0,0,0,5.41476,0,0),(129309,5,2281.32,-5778.16,155.278,0,0,0,0,0,0,0,0,0,0,5.27731,0,0),
 (129309,6,2290.24,-5799.08,155.755,0,0,0,0,0,0,0,0,0,0,4.55475,0,0),(129309,7,2276.33,-5844.93,155.665,0,0,0,0,0,0,0,0,0,0,4.40945,0,0),(129309,8,2263.16,-5886.47,156.938,0,0,0,0,0,0,0,0,0,0,4.11101,0,0),
 (129309,9,2242.2,-5912.74,155.951,0,0,0,0,0,0,0,0,0,0,3.40415,0,0),(129309,10,2200.92,-5923.29,155.951,0,0,0,0,0,0,0,0,0,0,2.94469,0,0),(129309,11,2158.67,-5917.14,155.318,0,0,0,0,0,0,0,0,0,0,2.53628,0,0),
 (129309,12,2136.31,-5900.67,156.788,0,0,0,0,0,0,0,0,0,0,1.91189,0,0),(129309,13,2123.42,-5863.52,148.169,0,0,0,0,0,0,0,0,0,0,1.63307,0,0),(129309,14,2121.53,-5820.75,138.371,0,0,0,0,0,0,0,0,0,0,1.75078,0,0),
 (129309,15,2111.89,-5771.5,134.135,0,0,0,0,0,0,0,0,0,0,1.37923,0,0),(129309,16,2125.88,-5723.01,133.709,0,0,0,0,0,0,0,0,0,0,1.06586,0,0),(129309,17,2138.47,-5699.54,135.795,0,0,0,0,0,0,0,0,0,0,0.386486,0,0),
 (129309,18,2155.43,-5694.27,135.652,0,0,0,0,0,0,0,0,0,0,6.14738,0,0),(129309,19,2183.66,-5699.13,139.435,0,0,0,0,0,0,0,0,0,0,5.85286,0,0),(128739,1,2369.01,-5785.95,154,0,0,0,0,0,0,0,0,0,0,2.21732,0,0),
 (128739,2,2360.79,-5775.14,154,0,0,0,0,0,0,0,0,0,0,1.04668,0,0),(128739,3,2366.14,-5770.66,154,0,0,0,0,0,0,0,0,0,0,6.23032,0,0),(128739,4,2374.79,-5779.1,154,0,0,0,0,0,0,0,0,0,0,4.80736,0,0),
 (128739,5,2375.1,-5786.28,154,0,0,0,0,0,0,0,0,0,0,3.52402,0,0),(129212,1,2207.34,-5805.32,101.348,0,0,0,0,0,0,0,0,0,0,3.0546,0,0),(129212,2,2195.45,-5805.9,101.341,0,0,0,0,0,0,0,0,0,0,4.03792,0,0),
 (129212,3,2191.86,-5815.46,101.666,0,0,0,0,0,0,0,0,0,0,4.83902,0,0),(129212,4,2193.64,-5842.82,101.541,0,0,0,0,0,0,0,0,0,0,5.33775,0,0),(129212,5,2203.16,-5851.82,101.431,0,0,0,0,0,0,0,0,0,0,5.75322,0,0),
 (129212,6,2213.02,-5855.27,101.487,0,0,0,0,0,0,0,0,0,0,6.20875,0,0),(129212,7,2227.77,-5851.65,101.476,0,0,0,0,0,0,0,0,0,0,0.377164,0,0),(129212,8,2249.47,-5838.4,101.283,0,0,0,0,0,0,0,0,0,0,1.16256,0,0),
 (129212,9,2237.92,-5828.06,101.318,0,0,0,0,0,0,0,0,0,0,2.5952,0,0),(129212,10,2215.99,-5816.71,101.572,0,0,0,0,0,0,0,0,0,0,2.36008,0,0),(129217,1,2217.34,-5873.99,101.251,1000,2860501,0,0,0,0,0,0,0,0,0.593412,0,0),
 (129217,2,2214.53,-5869.6,101.534,0,0,0,0,0,0,0,0,0,0,2.83545,0,0),(129217,3,2181.07,-5865.87,101.331,0,0,0,0,0,0,0,0,0,0,3.36324,0,0),(129217,4,2139.21,-5878.27,101.469,0,0,0,0,0,0,0,0,0,0,3.93265,0,0),
 (129217,5,2118.11,-5903.57,104.343,0,0,0,0,0,0,0,0,0,0,3.3436,0,0),(129217,6,2072.44,-5914.58,106.378,0,0,0,0,0,0,0,0,0,0,3.39073,0,0),(129217,7,2028.89,-5920.68,105.233,0,0,0,0,0,0,0,0,0,0,3.28863,0,0),
 (129217,8,2003.16,-5924.91,105.324,0,0,0,0,0,0,0,0,0,0,3.41822,0,0),(129217,9,1968.43,-5935.75,102.545,0,0,0,0,0,0,0,0,0,0,3.21401,0,0),(129217,10,1924.76,-5931.14,103.405,0,0,0,0,0,0,0,0,0,0,2.93127,0,0),
 (129217,11,1894.96,-5921.15,103.129,0,0,0,0,0,0,0,0,0,0,2.94698,0,0),(129217,12,1849.19,-5916.93,105.57,0,0,0,0,0,0,0,0,0,0,3.19438,0,0),(129217,13,1818.86,-5920.18,112.552,0,0,0,0,0,0,0,0,0,0,3.19438,0,0),
 (129217,14,1780.82,-5925.05,116.113,0,0,0,0,0,0,0,0,0,0,2.85273,0,0),(129217,15,1741.46,-5907.59,116.121,1000,2860502,0,0,0,0,0,0,0,0,2.73099,0,0),(129024,1,2179.57,-6107.15,1.51502,0,0,0,0,0,0,0,0,0,0,1.37137,0,0),
 (129024,2,2179.03,-6096.94,2.3859,0,0,0,0,0,0,0,0,0,0,2.58716,0,0),(129024,3,2168.04,-6094.05,5.94641,0,0,0,0,0,0,0,0,0,0,3.0584,0,0),(129024,4,2143.18,-6093.86,6.09899,0,0,0,0,0,0,0,0,0,0,3.07411,0,0),
 (129024,5,2114.83,-6090.37,5.1301,0,0,0,0,0,0,0,0,0,0,3.09375,0,0),(129024,6,2145,-6093.78,6.10321,0,0,0,0,0,0,0,0,0,0,6.2157,0,0),(129024,7,2168.88,-6094.96,5.76342,0,0,0,0,0,0,0,0,0,0,6.16465,0,0),
 (129024,8,2175.73,-6096.3,3.57095,0,0,0,0,0,0,0,0,0,0,5.5599,0,0),(129024,9,2179.58,-6107.32,1.51689,0,0,0,0,0,0,0,0,0,0,4.38495,0,0),(129024,10,2165.01,-6131.09,0.904949,0,0,0,0,0,0,0,0,0,0,4.13738,0,0),
 (129051,1,2103.7,-6107.22,5.77286,0,0,0,0,0,0,0,0,0,0,1.01697,0,0),(129051,2,2085.54,-6127.37,5.72649,0,0,0,0,0,0,0,0,0,0,4.46251,0,0),(129051,3,2090.42,-6139.78,4.43297,0,0,0,0,0,0,0,0,0,0,5.94376,0,0),
 (129051,4,2104.3,-6141.27,4.49426,0,0,0,0,0,0,0,0,0,0,6.26969,0,0),(129051,5,2125,-6139.38,3.86834,0,0,0,0,0,0,0,0,0,0,6.25791,0,0),(129051,6,2103.94,-6141.22,4.49392,0,0,0,0,0,0,0,0,0,0,3.07548,0,0),
 (129051,7,2090.16,-6139.68,4.43287,0,0,0,0,0,0,0,0,0,0,2.29165,0,0),(129051,8,2087.82,-6126.71,5.71026,0,0,0,0,0,0,0,0,0,0,1.21958,0,0),(129051,9,2095.76,-6115.24,5.76367,0,0,0,0,0,0,0,0,0,0,0.895089,0,0),
 (129146,1,2245.68,-6131.37,5.29431,0,0,0,0,0,0,0,0,0,0,0.575207,0,0),(129146,2,2252.35,-6126.42,5.75842,0,0,0,0,0,0,0,0,0,0,0.363148,0,0),(129146,3,2270.7,-6120.51,2.75591,0,0,0,0,0,0,0,0,0,0,0.312097,0,0),
 (129146,4,2287.86,-6115.51,4.8859,0,0,0,0,0,0,0,0,0,0,0.280681,0,0),(129146,5,2297.05,-6115.79,6.26882,0,0,0,0,0,0,0,0,0,0,5.94655,0,0),(129146,6,2306.74,-6121.55,6.43682,0,0,0,0,0,0,0,0,0,0,5.36536,0,0),
 (129146,7,2308.62,-6128.9,6.86548,0,0,0,0,0,0,0,0,0,0,4.38283,0,0),(129146,8,2301.72,-6135.21,6.1862,0,0,0,0,0,0,0,0,0,0,3.40658,0,0),(129146,9,2270.36,-6142.35,1.33784,0,0,0,0,0,0,0,0,0,0,3.34375,0,0),
 (129146,10,2248.5,-6146.83,1.93632,0,0,0,0,0,0,0,0,0,0,2.72171,0,0),(129146,11,2242.61,-6139.31,3.46995,0,0,0,0,0,0,0,0,0,0,1.54603,0,0),(129020,1,2218.21,-6052.15,6.28245,0,0,0,0,0,0,0,0,0,0,0.598786,0,0),
 (129020,2,2198.15,-6068.16,4.91828,0,0,0,0,0,0,0,0,0,0,4.19355,0,0),(129020,3,2188.98,-6087.36,2.66273,0,0,0,0,0,0,0,0,0,0,4.59567,0,0),(129020,4,2184.96,-6111.21,1.21427,0,0,0,0,0,0,0,0,0,0,4.67499,0,0),
 (129020,5,2186.51,-6131.86,3.4451,0,0,0,0,0,0,0,0,0,0,4.78887,0,0),(129020,6,2188.47,-6151.98,3.71727,0,0,0,0,0,0,0,0,0,0,4.87134,0,0),(129020,7,2188.08,-6136.73,4.10259,0,0,0,0,0,0,0,0,0,0,1.60408,0,0),
 (129020,8,2185.62,-6110.87,1.17962,0,0,0,0,0,0,0,0,0,0,1.46664,0,0),(129020,9,2189.14,-6086.95,2.69276,0,0,0,0,0,0,0,0,0,0,1.14855,0,0),(129020,10,2199.44,-6066.72,5.2338,0,0,0,0,0,0,0,0,0,0,0.870521,0,0),
 (129020,11,2208.87,-6057.5,6.1144,0,0,0,0,0,0,0,0,0,0,0.763707,0,0),(129153,1,2239.26,-6128.36,6.35309,0,0,0,0,0,0,0,0,0,0,2.93789,0,0),(129153,2,2228.98,-6125.41,6.05118,0,0,0,0,0,0,0,0,0,0,3.49709,0,0),
 (129153,3,2218.05,-6132.01,5.17829,0,0,0,0,0,0,0,0,0,0,4.10342,0,0),(129153,4,2214.68,-6141.26,4.21172,0,0,0,0,0,0,0,0,0,0,3.82381,0,0),(129153,5,2208.37,-6144.86,4.73456,0,0,0,0,0,0,0,0,0,0,3.24026,0,0),
 (129153,6,2189.38,-6141.99,4.52894,0,0,0,0,0,0,0,0,0,0,1.79434,0,0),(129153,7,2187.27,-6130.15,3.02815,0,0,0,0,0,0,0,0,0,0,1.62863,0,0),(129153,8,2187.16,-6116.05,1.32184,0,0,0,0,0,0,0,0,0,0,0.8393,0,0),
 (129153,9,2200.42,-6111,1.86493,0,0,0,0,0,0,0,0,0,0,0.262818,0,0),(129153,10,2223.18,-6106.04,4.94713,0,0,0,0,0,0,0,0,0,0,6.0724,0,0),(129153,11,2227.17,-6111.04,5.31839,0,0,0,0,0,0,0,0,0,0,4.95086,0,0),
 (129153,12,2227.65,-6122.54,5.86751,0,0,0,0,0,0,0,0,0,0,5.29301,0,0),(129153,13,2240.05,-6128.76,6.27566,0,0,0,0,0,0,0,0,0,0,6.25982,0,0),(129153,14,2251.74,-6121.79,6.50212,0,0,0,0,0,0,0,0,0,0,0.30729,0,0),
 (129153,15,2255.06,-6123.27,5.66065,0,0,0,0,0,0,0,0,0,0,5.10529,0,0),(129282,1,2222.74,-5727.17,101.697,0,0,0,0,0,0,0,0,0,0,5.47818,0,0),(129282,2,2250.67,-5748.94,101.871,0,0,0,0,0,0,0,0,0,0,5.50567,0,0),
 (129282,3,2269.82,-5768.2,101.087,0,0,0,0,0,0,0,0,0,0,5.48603,0,0),(129282,4,2287.93,-5784.64,101.515,0,0,0,0,0,0,0,0,0,0,5.27398,0,0),(129282,5,2255.71,-5754.28,101.265,0,0,0,0,0,0,0,0,0,0,2.39157,0,0),
 (129282,6,2209.13,-5719.56,101.457,0,0,0,0,0,0,0,0,0,0,2.72929,0,0),(129284,1,2393.09,-5842.98,109.556,0,0,0,0,0,0,0,0,0,0,0.279604,0,0),(129284,2,2379.74,-5844.31,107.759,0,0,0,0,0,0,0,0,0,0,3.0285,0,0),
 (129284,3,2351.15,-5844.13,101.091,0,0,0,0,0,0,0,0,0,0,2.7811,0,0),(129284,4,2334.78,-5830.87,101.224,0,0,0,0,0,0,0,0,0,0,2.36876,0,0),(129284,5,2351.21,-5844.41,101.088,0,0,0,0,0,0,0,0,0,0,6.03265,0,0),
 (129284,6,2384.59,-5843.93,108.505,0,0,0,0,0,0,0,0,0,0,0.0363362,0,0);
 
 -- MOVEMENT SCRIPTS -- for phase 1
 DELETE FROM dbscripts_on_creature_movement WHERE id IN (2861401,2870901,2861101,2861102,2860501,2860502);
 INSERT INTO dbscripts_on_creature_movement (id, delay, command, datalong, datalong2, buddy_entry, search_radius, data_flags, dataint, dataint2, dataint3, dataint4, x, y, z, o, comments) VALUES
 -- Acherus Geist
 (2870901,0,25,1,0,0,0,0,0,0,0,0,0,0,0,0,'RUN ON'),
 -- Scarlet Captain
 (2861101,1,3,0,700,0,0,0,0,0,0,0,2165.24,-5877.88,101.342,4.76026,''),
 (2861101,3,1,5,0,0,0,0,0,0,0,0,0,0,0,0,''),
 (2861101,4,31,28557,5,0,0,0,-9000,0,0,0,0,0,0,0,''),
 (2861101,5,21,1,0,28557,128758,0x10,0,0,0,0,0,0,0,0,'Scarlet Peasant - active'),
 (2861101,6,1,0,0,28557,128758,7 | 0x10,0,0,0,0,0,0,0,0,'state emote - off'),
 (2861101,8,3,0,0,28557,128758,0x10,0,0,0,0,0,0,0,1.61081,''),
 (2861101,9,0,0,0,28557,128758,7 | 0x10,2000000407,2000000408,0,0,0,0,0,0,''),
 (2861101,12,3,0,0,28557,128758,0x10,0,0,0,0,0,0,0,5.90615,''),
 (2861101,13,1,234,0,28557,128758,7 | 0x10,0,0,0,0,0,0,0,0,''),
 (2861101,14,21,0,0,28557,128758,0x10,0,0,0,0,0,0,0,0,'Scarlet Peasant - unactive'),
 (2861102,1,3,0,700,0,0,0,0,0,0,0,2144.43,-5724.82,100.802,0.60027,''),
 (2861102,3,1,5,0,0,0,0,0,0,0,0,0,0,0,0,''),
 (2861102,4,31,28557,5,0,0,0,-9000,0,0,0,0,0,0,0,''),
 (2861102,5,21,1,0,28557,128790,0x10,0,0,0,0,0,0,0,0,'Scarlet Peasant - active'),
 (2861102,6,1,0,0,28557,128790,7 | 0x10,0,0,0,0,0,0,0,0,'state emote - off'),
 (2861102,8,3,0,0,28557,128790,0x10,0,0,0,0,0,0,0,3.7183,''),
 (2861102,9,0,0,0,28557,128790,7 | 0x10,2000000407,2000000408,0,0,0,0,0,0,''),
 (2861102,12,3,0,0,28557,128790,0x10,0,0,0,0,0,0,0,5.7737,''),
 (2861102,13,1,234,0,28557,128790,7 | 0x10,0,0,0,0,0,0,0,0,''),
 (2861102,14,21,0,0,28557,128790,0x10,0,0,0,0,0,0,0,0,'Scarlet Peasant - unactive'),
 -- Scarlet Gryphon
 (2861401,0,25,1,0,0,0,0,0,0,0,0,0,0,0,0,'RUN ON'), 
 -- Havenshire Stallion
 (2860501,0,25,1,0,0,0,0,0,0,0,0,0,0,0,0,'RUN ON'),
 (2860501,1,21,1,0,0,0,0,0,0,0,0,0,0,0,0,'Havenshire Stallion - active'),
 (2860502,0,21,0,0,0,0,0,0,0,0,0,0,0,0,0,'Havenshire Stallion - unactive'),
 (2860502,1,18,0,0,0,0,0,0,0,0,0,0,0,0,0,'despawn'); 
 -- Scourge Sky Darkeener
 DELETE FROM dbscripts_on_spell WHERE id = 52124;
 INSERT INTO dbscripts_on_spell (id, delay, command, datalong, datalong2, buddy_entry, search_radius, data_flags, dataint, dataint2, dataint3, dataint4, x, y, z, o, comments) VALUES
 (52124,1,15,52125,0,28655,500,1 | 0x08,0,0,0,0,0,0,0,0,''); 
 -- Scarlet Captain
 DELETE FROM dbscripts_on_creature_death WHERE id = 28611;
 INSERT INTO dbscripts_on_creature_death (id, delay, command, datalong, datalong2, buddy_entry, search_radius, data_flags, dataint, dataint2, dataint3, dataint4, x, y, z, o, comments) VALUES
 (28611,0,24,0,0,0,0,0,0,0,0,0,0,0,0,0,'unmount');
 
 -- LINKS -- for phase 1
 -- Havenshire Stallion #1
 DELETE FROM creature_linking WHERE guid IN (129208,129216,129230,129234,129237,129243,129252);
 INSERT INTO creature_linking (guid, master_guid, flag) VALUES
 (129208, 129212, 512),
 (129230, 129212, 512),
 (129234, 129212, 512),
 (129243, 129212, 512),
 -- Havenshire Stallion #2
 (129237, 129217, 8843), -- UDB fix, Mangos Necrovoice flag update
 (129216, 129217, 8843), -- UDB fix, Mangos Necrovoice flag update
 (129252, 129217, 8843); -- UDB fix, Mangos Necrovoice flag update
 
 -- TEXTS -- for phase 1
 DELETE FROM db_script_string WHERE entry BETWEEN 2000000407 AND 2000000408;
 INSERT INTO db_script_string (entry, content_default, content_loc1, content_loc2, content_loc3, content_loc4, content_loc5, content_loc6, content_loc7, content_loc8, sound, type, language, emote, comment) VALUES 
 (2000000407,'I\'m workin\' as fast as I can, cap\'n!',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,0,0,NULL),
 (2000000408,'I can\'t keep this pace up, sir! If the Scourge don\'t get me, exhaustion will!',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,0,0,0,NULL);
    

        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
        -- -- PLACE UPDATE SQL ABOVE -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -

        -- If we get here ok, commit the changes
        IF bRollback = TRUE THEN
            ROLLBACK;
            SHOW ERRORS;
            SELECT '* UPDATE FAILED *' AS `===== Status =====`,@cCurResult AS `===== DB is on Version: =====`;



        ELSE
            COMMIT;
            SELECT '* UPDATE COMPLETE *' AS `===== Status =====`,@cNewResult AS `===== DB is now on Version =====`;
        END IF;
    ELSE    -- Current version is not the expected version
        IF (@cCurResult = @cNewResult) THEN    -- Does the current version match the new version
            SELECT '* UPDATE SKIPPED *' AS `===== Status =====`,@cCurResult AS `===== DB is already on Version =====`;
        ELSE    -- Current version is not one related to this update
            IF(@cCurResult IS NULL) THEN    -- Something has gone wrong
                SELECT '* UPDATE FAILED *' AS `===== Status =====`,'Unable to locate DB Version Information' AS `============= Error Message =============`;
            ELSE
		IF(@cOldResult IS NULL) THEN    -- Something has gone wrong
		    SET @cCurVersion := (SELECT `version` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
		    SET @cCurStructure := (SELECT `STRUCTURE` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
		    SET @cCurContent := (SELECT `Content` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
                    SET @cCurOutput = CONCAT(@cCurVersion, '_', @cCurStructure, '_', @cCurContent, ' - ',@cCurResult);
                    SET @cOldResult = CONCAT('Rel',@cOldVersion, '_', @cOldStructure, '_', @cOldContent, ' - ','IS NOT APPLIED');
                    SELECT '* UPDATE SKIPPED *' AS `===== Status =====`,@cOldResult AS `=== Expected ===`,@cCurOutput AS `===== Found Version =====`;
		ELSE
		    SET @cCurVersion := (SELECT `version` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
		    SET @cCurStructure := (SELECT `STRUCTURE` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
		    SET @cCurContent := (SELECT `Content` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
                    SET @cCurOutput = CONCAT(@cCurVersion, '_', @cCurStructure, '_', @cCurContent, ' - ',@cCurResult);
                    SELECT '* UPDATE SKIPPED *' AS `===== Status =====`,@cOldResult AS `=== Expected ===`,@cCurOutput AS `===== Found Version =====`;
                END IF;
            END IF;
        END IF;
    END IF;
END $$

DELIMITER ;

-- Execute the procedure
CALL update_mangos();

-- Drop the procedure
DROP PROCEDURE IF EXISTS `update_mangos`;

